(function (g, f) {if ("object" == typeof exports && "object" == typeof module) {module.exports = f();} else if ("function" == typeof define && define.amd) {define("sprae", [], f);} else if ("object" == typeof exports) {exports["sprae"] = f();} else {g["sprae"] = f();}}(typeof self !== 'undefined' ? self : typeof globalThis !== 'undefined' ? globalThis : this, () => {var exports = {};var module = { exports };
var oe=Object.defineProperty;var ve=Object.getOwnPropertyDescriptor;var _e=Object.getOwnPropertyNames;var et=Object.prototype.hasOwnProperty;var d=(e,r)=>()=>(e&&(r=e(e=0)),r);var tt=(e,r)=>{for(var t in r)oe(e,t,{get:r[t],enumerable:!0})},rt=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of _e(r))!et.call(e,o)&&o!==t&&oe(e,o,{get:()=>r[o],enumerable:!(n=ve(r,o))||n.enumerable});return e};var ot=e=>rt(oe({},"__esModule",{value:!0}),e);var z,l,Q,J,ne,P,w,B,se,U,H,L,X,ie,ge,nt,Y,ae,be,k,he,G,T,y,xe,A,ue,W,Se,p,h=d(()=>{v();v();z=Symbol.dispose||(Symbol.dispose=Symbol("dispose")),l=Symbol("state"),Q=Symbol("on"),J=Symbol("off"),ne=Symbol("add"),P=":",U=e=>e(),H=U,L={},X={},ie=null,ge=(e=document.body,r)=>{if(e[l])return Object.assign(e[l],r);r=K(r||{});let t=[],n=[],o,i=()=>!n&&(n=t.map(u=>u())),s=()=>(n?.map(u=>u()),n=null);e[Q]=i,e[J]=s,e[z]||(e[z]=()=>(e[J](),e[J]=e[Q]=e[z]=e[l]=e[ne]=null));let a=(u,f=u.attributes)=>{if(f)for(let m=0;m<f.length;){let{name:c,value:g}=f[m];if(c.startsWith(P)){if(u.removeAttribute(c),(o=nt(u,c,g,r))&&(t.push(o),n.push(o())),l in u)return}else m++}for(let m of[...u.childNodes])m.nodeType==1&&a(m)};return e[ne]=a,a(e),e[l]===void 0&&(e[l]=r),r},nt=(e,r,t,n)=>{let o,i,s=r.slice(P.length).split("..").map((a,u,{length:f})=>a.split(P).reduce((m,c)=>{let[g,...b]=c.split("."),D=k(t,L[ie=g]?.parse);if(g.startsWith("on")){let V=g.slice(2),F=he(G(f==1?M=>D(n,re=>y(re,M)):M=>(o=(u?o:re=>y(D(n),re))(M),i(),i=s[(u+1)%f]()),{target:e}),b);return M=>(M=m?.(),F.target.addEventListener(V,F,F),()=>(M?.(),F.target.removeEventListener(V,F)))}let N,x,$,S;b.length?($=w(-1),S=-1,N=he(G(W(()=>{++$.value||(x=B(()=>E&&($.value==S?N():(S=$.value,D(n,E)))))}),{target:e}),b)):N=G(()=>x=B(()=>D(n,E)),{target:e});let E=(L[g]||L["*"])(N.target,n,t,g);if(E)return e[l]&&(n=e[l]),V=>(V=m?.(),N(),()=>(V?.(),x?.(),$&&($.value=-1,S=x=null)))},null));return()=>i=s[0]?.()},Y=e=>(e.compile&&(be=e.compile),e.prefix&&(P=e.prefix),e.signal&&(w=e.signal),e.effect&&(B=e.effect),e.computed&&(se=e.computed),e.batch&&(U=e.batch),e.untracked&&(H=e.untracked)),ae=(e=document.body,r)=>{let t=K(r);return ge(e,t),new MutationObserver(o=>{for(let i of o)for(let s of i.addedNodes)if(s.nodeType===1&&s[l]===void 0){for(let a of s.attributes)if(a.name.startsWith(P)){e[ne](s);break}}}).observe(e,{childList:!0,subtree:!0}),t},k=(e,r,t)=>{if(t=k.cache[e])return t;let n=e.trim()||"undefined";r&&(n=r(n)),/^(if|let|const)\b/.test(n)||/;(?![^{]*})/.test(n)||(n=`return ${n}`),/\bawait\s/.test(n)&&(n=`return (async()=>{ ${n} })()`);try{t=be(n),Object.defineProperty(t,"name",{value:`\u2234 ${e}`})}catch(o){console.error(`\u2234 ${o}

${P+ie}="${e}"`)}return k.cache[e]=(o,i,s)=>{try{let a=t?.(o);return i?(a?.then?a.then(u=>s=i(u)):s=i(a),()=>y(s)):a}catch(a){console.error(`\u2234 ${a}

${P+ie}="${e}"`)}}};k.cache={};he=(e,r)=>{for(;r.length;){let[t,...n]=r.pop().split("-");e=G(X[t]?.(e,...n)??e,e)}return e},G=(e,r)=>{if(e!=r)for(let t in r)e[t]??(e[t]=r[t]);return e},T=e=>{if(!e.nodeType)return e;let r=e.content.cloneNode(!0),t=[...e.attributes],n=document.createTextNode(""),o=(r.append(n),[...r.childNodes]);return{childNodes:o,content:r,remove:()=>r.append(...o),replaceWith(i){i!==n&&(n.before(i),r.append(...o))},attributes:t,removeAttribute(i){t.splice(t.findIndex(s=>s.name===i),1)}}},y=(e,r)=>typeof e=="function"?e(r):e,xe=e=>e.replace(/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,(r,t)=>(t?"-":"")+r.toLowerCase()),A=(e,r,t)=>t==null||t===!1?e.removeAttribute(r):e.setAttribute(r,t===!0?"":t),ue=(e,r=[])=>e?typeof e=="string"?e:(Array.isArray(e)?e.map(ue):Object.entries(e).reduce((t,[n,o])=>o?[...t,n]:t,[])).join(" "):"",W=(e,r=queueMicrotask)=>{let t=0,n=o=>{t++||(e(o),r((i=t>1)=>(t=0,i&&n(o))))};return n},Se=(e,r=queueMicrotask,t=0)=>(n,o=++t)=>r(()=>o==t&&e(n)),p=ge});var O,j,le,ce,q,it,_,Ae,K,v=d(()=>{h();O=Symbol("signals"),j=Symbol("change"),le=Symbol("set"),ce=!0,q=(e,r)=>{if(!e||e[Symbol.toStringTag]||e[O])return e;if(e.constructor!==Object)return Array.isArray(e)?it(e):e;let t=Object.keys(e).length,n={},o=new Proxy(Object.assign(n,{[j]:w(t),[O]:n}),{get:(s,a)=>a in n?n[a]?n[a].valueOf():n[a]:r?r[a]:globalThis[a],set:(s,a,u,f)=>a in n?(Ae(n,a,u),1):(ce=!1,r&&a in r?r[a]=u:(_(n,a,u),n[j].value=++t),ce=!0,1),deleteProperty:(s,a)=>(a in n&&(a[0]!="_"&&n[a]?.[Symbol.dispose]?.(),delete n[a],n[j].value=--t),1),ownKeys:()=>(n[j].value,Reflect.ownKeys(n)),has:(s,a)=>a in n?!0:r?a in r:ce}),i=Object.getOwnPropertyDescriptors(e);for(let s in e)i[s]?.get?(n[s]=se(i[s].get.bind(o)))[le]=i[s].set?.bind(o):_(n,s,e[s]);return o},it=(e,r=globalThis)=>{let t=Array(e.length).fill(null),n=!1,o=a=>function(){return n=!0,a.apply(this,arguments)},i=w(e.length),s=new Proxy(Object.assign(t,{[j]:i,[O]:t,push:o(t.push),pop:o(t.pop),shift:o(t.shift),unshift:o(t.unshift),splice:o(t.splice)}),{get(a,u){return u==="length"?n?(n=!1,t.length):i.value:typeof u=="symbol"||isNaN(u)?t[u]?.valueOf()??r[u]:(t[u]??(t[u]=w(q(e[u])))).valueOf()},set(a,u,f){if(u==="length"){for(let m=f;m<t.length;m++)delete s[m];i.value=t.length=f}else u>=t.length?(_(t,u,f),s.length=+u+1):t[u]?Ae(t,u,f):_(t,u,f);return 1},deleteProperty:(a,u)=>(t[u]?.[Symbol.dispose]?.(),delete t[u],1)});return s},_=(e,r,t)=>e[r]=r[0]=="_"||t?.peek?t:w(q(t)),Ae=(e,r,t,n,o)=>r[0]==="_"?e[r]=t:t!==(o=(n=e[r]).peek())&&(n[le]?n[le](t):Array.isArray(t)&&Array.isArray(o)?j in o?H(()=>U(()=>{for(let i=0;i<t.length;i++)o[i]=t[i];o.length=t.length})):n.value=t:n.value=q(t)),K=q});var C,Oe,I,ee,te,fe,pe,de,ke=d(()=>{Oe=0,ee=(e,r,t=new Set,n=()=>r.value)=>r={get value(){return C?.deps.push(t.add(C)),e},set value(o){if(o!==e){e=o;for(let i of t)I?I.add(i):i()}},peek(){return e},toJSON:n,then:n,toString:n,valueOf:n},te=(e,r,t,n,o)=>(t=i=>{if(o=r,r=null,o?.call?.(),i=C,C=t,Oe++>10)throw"Cycle detected";try{r=e()}finally{C=i,Oe--}},n=t.deps=[],t(),i=>{for(r?.call?.();i=n.pop();)i.delete(t)}),fe=(e,r=ee(),t,n,o=()=>t.value)=>t={get value(){return n||(n=te(()=>r.value=e())),r.value},peek:r.peek,toJSON:o,then:o,toString:o,valueOf:o},pe=(e,r=!I)=>{I??(I=new Set);try{e()}finally{if(r){for(let t of I)t();I=null}}},de=(e,r,t)=>(r=C,C=null,t=e(),C=r,t)});var we,je=d(()=>{h();we=(e,r,t,n,o)=>{var i;return e._holder?p(n=e,r):(e[i=l]??(e[i]=null),n=e.content?T(e):e,e.replaceWith(t=document.createTextNode("")),n._holder=t._holder=t,t._clauses=[n._clause=[n,!1]],t.update=W(()=>{let s=t._clauses.find(([,a])=>a);s!=o&&(o?.[0].remove(),o?.[0][J]?.(),(o=s)&&(t.before(o[0].content||o[0]),o[0][l]?o[0][Q]?.():(delete o[0][l],p(o[0],r))))})),s=>{n._clause[1]=s,n._holder.update()}}});var Ne,$e=d(()=>{h();Ne=(e,r,t,n,o=e)=>{for(t=e.content?T(e):e;o&&!(t._holder=o._holder);)o=o.previousSibling;return e.remove(),e[l]=null,t._holder._clauses.push(t._clause=[t,!0]),t._holder.update}});var Te,Ce=d(()=>{h();Te=e=>(e.content&&e.replaceWith(e=T(e).childNodes[0]),r=>(r=y(r,e.textContent),e.textContent=r??""))});var De,Pe=d(()=>{h();De=(e,r,t)=>(r=new Set,n=>{t=new Set,n&&ue(y(n,e.className)).split(" ").map(o=>o&&t.add(o));for(let o of r)t.has(o)?t.delete(o):e.classList.remove(o);for(let o of r=t)e.classList.add(o)})});var We,qe=d(()=>{h();We=(e,r)=>(r=e.getAttribute("style"),t=>{if(t=y(t,e.style),typeof t=="string")A(e,"style",r+"; "+t);else{r&&A(e,"style",r);for(let n in t)n[0]=="-"?e.style.setProperty(n,t[n]):n[0]>"A"&&(e.style[n]=t[n])}})});var Ee,Me=d(()=>{h();Ee=()=>y});var st,Le,Ke=d(()=>{h();st=(e,r=k(`${e}=__`))=>(t,n)=>{t.__=n,r(t),delete t.__},Le=(e,r,t,n)=>{try{let o=st(t),i=e.type==="checkbox"?()=>o(r,e.checked):e.type==="select-multiple"?()=>o(r,[...e.selectedOptions].map(s=>s.value)):()=>o(r,e.selectedIndex<0?null:e.value);e.oninput=e.onchange=i,e.type?.startsWith("select")&&(new MutationObserver(i).observe(e,{childList:!0,subtree:!0,attributes:!0}),p(e,r)),k(t)(r)??i()}catch{}return e.type==="text"||e.type===""?o=>e.setAttribute("value",e.value=o??""):e.tagName==="TEXTAREA"||e.type==="text"||e.type===""?(o,i,s)=>(i=e.selectionStart,s=e.selectionEnd,e.setAttribute("value",e.value=o??""),i&&e.setSelectionRange(i,s)):e.type==="checkbox"?o=>(e.checked=o,A(e,"checked",o)):e.type==="radio"?o=>e.value===o&&(e.checked=o,A(e,"checked",o)):e.type==="select-one"?o=>{for(let i of e.options)i.value==o?i.setAttribute("selected",""):i.removeAttribute("selected");e.value=o}:e.type==="select-multiple"?o=>{for(let i of e.options)i.removeAttribute("selected");for(let i of o)e.querySelector(`[value="${i}"]`).setAttribute("selected","")}:o=>e.value=o}});var Ie,Re=d(()=>{h();Ie=(e,r,t,n,o,i)=>{if(typeof k(t)(r)=="function")return s=>s(e);Object.defineProperty(r,t,{value:e,configurable:!0})}});var Ve,Fe=d(()=>{h();Ve=(e,r)=>{let t=e[l]=q({},r),n=!1;return o=>{if(o=y(o,t),o!==t)for(let i in o){let s=typeof o[i]=="function"?o[i].bind(t):o[i];i in t[O]?t[i]=s:t[O][i]=i[0]=="_"||s?.peek?s:w(q(s))}return!n&&(n=!0,delete e[l],H(()=>p(e,t)))}}});var Je,Be,He=d(()=>{h();Je=(e,r,t)=>{let[n,o="$"]=t.split(/\bin\b/)[0].trim().replace(/\(|\)/g,"").split(/\s*,\s*/),i=document.createTextNode(""),s,a,u,f=0,m=W(()=>{var D,N;let c=0,g=u,b=g.length;if(s&&!s[j]){for(let x of s[O]||[])x[Symbol.dispose]();s=null,f=0}if(b<f)s.length=b;else{if(!s)s=g;else for(;c<f;)s[c]=g[c++];for(;c<b;c++){s[c]=g[c];let x=c,$=Object.create(r,{[n]:{get:()=>s[x]},[o]:{value:a?a[x]:x}}),S=e.content?T(e):e.cloneNode(!0);i.before(S.content||S),p(S,$);let E=((N=s[D=O]||(s[D]=[]))[c]||(N[c]={}))[Symbol.dispose];s[O][c][Symbol.dispose]=()=>{E?.(),S[Symbol.dispose]?.(),S.remove()}}}f=b});return e.replaceWith(i),e[l]=null,c=>(a=null,typeof c=="number"?u=Array.from({length:c},(g,b)=>b+1):c?.constructor===Object?(a=Object.keys(c),u=Object.values(c)):u=c||[],B(()=>{u[j]?.value,m()}))};Je.parse=e=>e.split(/\bin\b/)[1].trim();Be=Je});var Xe,Ze=d(()=>{h();Xe=(e,r,t,n)=>o=>A(e,n,y(o,e.getAttribute(n)))});var ze,Ge=d(()=>{h();ze=e=>r=>{for(let t in r)A(e,xe(t),r[t])}});var Qe={};tt(Qe,{batch:()=>pe,computed:()=>fe,default:()=>at,effect:()=>te,signal:()=>ee,sprae:()=>p,start:()=>ae,store:()=>K,untracked:()=>de,use:()=>Y});var me,at,Ue=d(()=>{v();ke();h();je();$e();Ce();Pe();qe();Me();Ke();Re();Fe();He();Ze();Ge();Object.assign(L,{"*":Xe,"":ze,class:De,text:Te,style:We,fx:Ee,value:Le,ref:Ie,scope:Ve,if:we,else:Ne,each:Be});Object.assign(X,{debounce:(e,r=250,t=r==="tick"?queueMicrotask:r==="raf"?requestAnimationFrame:r==="idle"?requestIdleCallback:o=>setTimeout(o,r),n=0)=>Se(e,t),throttle:(e,r=250,t=r==="tick"?queueMicrotask:r==="raf"?requestAnimationFrame:n=>setTimeout(n,r))=>W(e,t),once:(e,r,t)=>Object.assign(n=>!r&&(r=1,e(n)),{once:!0}),prevent:e=>r=>(r?.preventDefault(),e(r)),stop:e=>r=>(r?.stopPropagation(),e(r)),immediate:e=>r=>(r?.stopImmediatePropagation(),e(r)),passive:e=>(e.passive=!0,e),capture:e=>(e.capture=!0,e),window:e=>(e.target=e.target.ownerDocument.defaultView,e),document:e=>(e.target=e.target.ownerDocument,e),root:e=>(e.target=e.target.ownerDocument.documentElement,e),body:e=>(e.target=e.target.ownerDocument.body,e),parent:e=>(e.target=e.target.parentNode,e),self:e=>r=>r.target===e.target&&e(r),outside:e=>(r,t)=>(t=e.target,!t.contains(r.target)&&r.target.isConnected&&(t.offsetWidth||t.offsetHeight))});me={ctrl:e=>e.ctrlKey||e.key==="Control"||e.key==="Ctrl",shift:e=>e.shiftKey||e.key==="Shift",alt:e=>e.altKey||e.key==="Alt",meta:e=>e.metaKey||e.key==="Meta"||e.key==="Command",arrow:e=>e.key.startsWith("Arrow"),enter:e=>e.key==="Enter",esc:e=>e.key.startsWith("Esc"),tab:e=>e.key==="Tab",space:e=>e.key==="\xA0"||e.key==="Space"||e.key===" ",delete:e=>e.key==="Delete"||e.key==="Backspace",digit:e=>/^\d$/.test(e.key),letter:e=>/^\p{L}$/gu.test(e.key),char:e=>/^\S$/.test(e.key)};for(let e in me)X[e]=(r,...t)=>n=>me[e](n)&&t.every(o=>me[o]?.(n)??n.key===o)&&r(n);Y({compile:e=>p.constructor(`with (arguments[0]) { ${e} }`),signal:ee,effect:te,computed:fe,batch:pe,untracked:de});p.use=Y;p.store=K;p.directive=L;p.modifier=X;p.start=ae;at=p});var ye=(Ue(),ot(Qe)).default;module.exports=ye;var R=document.currentScript,Ye=R.getAttribute("prefix")??R.dataset.prefix??R.dataset.spraePrefix,Z=R.getAttribute("start")??R.dataset.start??R.dataset.spraeStart;Ye&&ye.use({prefix:Ye});Z!=null&&Z!=="false"&&(Z&&Z!=="true"?document.querySelectorAll(Z):[document.body]).forEach(e=>ye.start(e));
;if (typeof module.exports == "object" && typeof exports == "object") {
  var __cp = (to, from, except, desc) => {
    if ((from && typeof from === "object") || typeof from === "function") {
      for (let key of Object.getOwnPropertyNames(from)) {
        if (!Object.prototype.hasOwnProperty.call(to, key) && key !== except)
        Object.defineProperty(to, key, {
          get: () => from[key],
          enumerable: !(desc = Object.getOwnPropertyDescriptor(from, key)) || desc.enumerable,
        });
      }
    }
    return to;
  };
  module.exports = __cp(module.exports, exports);
}
return module.exports;
}))
