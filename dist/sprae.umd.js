(function (g, f) {if ("object" == typeof exports && "object" == typeof module) {module.exports = f();} else if ("function" == typeof define && define.amd) {define("sprae", [], f);} else if ("object" == typeof exports) {exports["sprae"] = f();} else {g["sprae"] = f();}}(typeof self !== 'undefined' ? self : typeof globalThis !== 'undefined' ? globalThis : this, () => {var exports = {};var module = { exports };
var _=Object.defineProperty;var Ge=Object.getOwnPropertyDescriptor;var Qe=Object.getOwnPropertyNames;var Ue=Object.prototype.hasOwnProperty;var f=(e,t)=>()=>(e&&(t=e(e=0)),t);var Ye=(e,t)=>{for(var r in t)_(e,r,{get:t[r],enumerable:!0})},_e=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Qe(t))!Ue.call(e,n)&&n!==r&&_(e,n,{get:()=>t[n],enumerable:!(o=Ge(t,n))||o.enumerable});return e};var et=e=>_e(_({},"__esModule",{value:!0}),e);var B,p,X,I,ee,w,E,R,te,Z,F,H,pe,fe,tt,re,de,me,ye,P,J,ue,rt,z,O,m,he,A,oe,$,y,d=f(()=>{G();G();B=Symbol.dispose||(Symbol.dispose=Symbol("dispose")),p=Symbol("state"),X=Symbol("on"),I=Symbol("off"),ee=Symbol("add"),w=":",Z=e=>e(),F=Z,H={},pe={},fe=(e=document.body,t)=>{if(e[p])return Object.assign(e[p],t);t=V(t||{});let r=[],o=[],n,s=()=>!o&&(o=r.map(c=>c())),i=()=>(o?.map(c=>c()),o=null);e[X]=s,e[I]=i,e[B]||(e[B]=()=>(e[I](),e[I]=e[X]=e[B]=e[p]=e[ee]=null));let a=(c,h=c.attributes)=>{if(h)for(let g=0;g<h.length;){let{name:l,value:u}=h[g];if(l.startsWith(w)){if(c.removeAttribute(l),r.push(n=tt(c,l,u,t)),o.push(n()),p in c)return}else g++}for(let g of[...c.childNodes])g.nodeType==1&&a(g)};return e[ee]=a,a(e),e[p]===void 0&&(e[p]=t),t},tt=(e,t,r,o)=>{let n,s,i=t.slice(w.length).split("..").map((a,c,{length:h})=>a.split(w).reduce((g,l)=>{let[u,...x]=l.split("."),v=u.startsWith("on")&&(u=u.slice(2),!0)||e["on"+u],C=ye(u,r,H[u]?.clean);if(v){let M=W=>m(C(o),W),K=ue(Object.assign(h==1?M:W=>(n=(c?n:M)(W),s(),s=i[(c+1)%h]()),{target:e,type:u}),x);return W=>(W=g?.(),K.target.addEventListener(u,K,K),()=>(W?.(),K.target.removeEventListener(u,K)))}let b=(H[u]||H["*"])(e,o,r,u);if(!x.length&&!g)return()=>b&&R(()=>b(C(o)));let L,S=E(-1),D=-1,le=$(ue(()=>{++S.value||(L=R(()=>b&&(S.value==D?le():(D=S.value,b(C(o))))))},x));return M=>(M=g?.(),le(),{[u]:()=>(M?.(),L(),S.value=-1,D=L=null)}[u])},null));return()=>s=i[0]()},re=e=>(e.directive&&(H=e.directive),e.modifier&&(pe=e.modifier),e.compile&&(me=e.compile),e.prefix&&(w=e.prefix),e.signal&&(E=e.signal),e.effect&&(R=e.effect),e.computed&&(te=e.computed),e.batch&&(Z=e.batch),e.untracked&&(F=e.untracked)),de=(e=document.body,t)=>{let r=V(t);return fe(e,r),new MutationObserver(n=>{for(let s of n)for(let i of s.addedNodes)if(i.nodeType===1&&i[p]===void 0){for(let a of i.attributes)if(a.name.startsWith(w)){e[ee](i);break}}}).observe(e,{childList:!0,subtree:!0}),r},ye=(e,t,r=J,o)=>{if(o=P[t=r(t)])return o;try{o=me(t)}catch(n){console.error(`\u2234 ${n}

${w+e}="${t}"`)}return P[t]=n=>{try{return o?.(n)}catch(s){console.error(`\u2234 ${s}

${w+e}="${t}"`)}}},P={},J=e=>e.trim(),ue=(e,t)=>{for(;t.length;){let[r,...o]=t.pop().split("-");e=rt(pe[r]?.(e,...o)??e,e)}return e},rt=(e,t)=>{if(e!=t)for(let r in t)e[r]??(e[r]=t[r]);return e},z=(e,t,r=ye(e,`${t}=__`))=>(o,n)=>{o.__=n,r(o),delete o.__},O=e=>{if(!e.nodeType)return e;let t=e.content.cloneNode(!0),r=[...e.attributes],o=document.createTextNode(""),n=(t.append(o),[...t.childNodes]);return{childNodes:n,content:t,remove:()=>t.append(...n),replaceWith(s){s!==o&&(o.before(s),t.append(...n))},attributes:r,removeAttribute(s){r.splice(r.findIndex(i=>i.name===s),1)}}},m=(e,t)=>typeof e=="function"?e(t):e,he=e=>e.replace(/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,(t,r)=>(r?"-":"")+t.toLowerCase()),A=(e,t,r)=>r==null||r===!1?e.removeAttribute(t):e.setAttribute(t,r===!0?"":r),oe=(e,t=[])=>e?typeof e=="string"?e:(Array.isArray(e)?e.map(oe):Object.entries(e).reduce((r,[o,n])=>n?[...r,o]:r,[])).join(" "):"",$=(e,t=queueMicrotask)=>{let r=0,o=n=>{r++||(e(n),t((s=r>1)=>(r=0,s&&o(n))))};return o},y=fe});var ot,N,k,ne,T,nt,Q,ge,be,V,G=f(()=>{d();ot=["push","pop","shift","unshift","splice"],N=Symbol("signals"),k=Symbol("change"),ne=Symbol("set"),T=(e,t=globalThis)=>{if(!e||e[Symbol.toStringTag]||e[N])return e;if(e.constructor!==Object)return Array.isArray(e)?nt(e):e;let r=Object.keys(e).length,o={},n=new Proxy(be(o,r),{get:(i,a)=>a in o?o[a]?o[a].valueOf():o[a]:t[a],set:(i,a,c,h)=>(a in o?ge(o,a,c):(Q(o,a,c),o[k].value=++r),1),deleteProperty:(i,a)=>(a in o&&(a[0]!="_"&&o[a]?.[Symbol.dispose]?.(),delete o[a],o[k].value=--r),1),ownKeys:()=>(o[k].value,Reflect.ownKeys(o)),has:i=>1}),s=Object.getOwnPropertyDescriptors(e);for(let i in e)s[i]?.get?(o[i]=te(s[i].get.bind(n)))[ne]=s[i].set?.bind(n):Q(o,i,e[i]);return n},nt=(e,t=globalThis)=>{let r,o=Array(e.length).fill(null),n=new Proxy(be(o,o.length),{get(s,i){return i==="length"?ot.includes(r)?o.length:o[k].value:(r=i,o[i]?o[i].valueOf():i in o?(o[i]=E(T(e[i]))).valueOf():t[i])},set(s,i,a){if(i==="length"){for(let c=a;c<o.length;c++)delete n[c];o[k].value=o.length=a}else i>=o.length?(Q(o,i,a),n.length=+i+1):o[i]?ge(o,i,a):Q(o,i,a);return 1},deleteProperty:(s,i)=>(o[i]?.[Symbol.dispose]?.(),delete o[i],1)});return n},Q=(e,t,r)=>e[t]=t[0]=="_"||r?.peek?r:E(T(r)),ge=(e,t,r,o,n)=>t[0]==="_"?e[t]=r:r!==(n=(o=e[t]).peek())&&(o[ne]?o[ne](r):Array.isArray(r)&&Array.isArray(n)?k in n?F(()=>Z(()=>{for(let s=0;s<r.length;s++)n[s]=r[s];n.length=r.length})):o.value=r:o.value=T(r)),be=(e,t)=>Object.assign(e,{[k]:E(t),[N]:e}),V=T});var j,xe,q,U,Y,ie,se,ae,Se=f(()=>{xe=0,U=(e,t,r=new Set,o=()=>t.value)=>t={get value(){return j?.deps.push(r.add(j)),e},set value(n){if(n!==e){e=n;for(let s of r)q?q.add(s):s()}},peek(){return e},toJSON:o,then:o,toString:o,valueOf:o},Y=(e,t,r,o,n)=>(r=s=>{if(n=t,t=null,n?.call?.(),s=j,j=r,xe++>10)throw"Cycle detected";try{t=e()}finally{j=s,xe--}},o=r.deps=[],r(),s=>{for(t?.call?.();s=o.pop();)s.delete(r)}),ie=(e,t=U(),r,o,n=()=>r.value)=>r={get value(){return o||(o=Y(()=>t.value=e())),t.value},peek:t.peek,toJSON:n,then:n,toString:n,valueOf:n},se=(e,t=!q)=>{q??(q=new Set);try{e()}finally{if(t){for(let r of q)r();q=null}}},ae=(e,t,r)=>(t=j,j=null,r=e(),j=t,r)});var Ae,ke=f(()=>{d();Ae=(e,t,r,o,n)=>{var s;return e._holder?y(o=e,t):(e[s=p]??(e[s]=null),o=e.content?O(e):e,e.replaceWith(r=document.createTextNode("")),o._holder=r._holder=r,r._clauses=[o._clause=[o,!1]],r.update=$(()=>{let i=r._clauses.find(([,a])=>a);i!=n&&(n?.[0].remove(),n?.[0][I]?.(),(n=i)&&(r.before(n[0].content||n[0]),n[0][p]?n[0][X]?.():(delete n[0][p],y(n[0],t))))})),i=>{o._clause[1]=i,o._holder.update()}}});var Oe,Ne=f(()=>{d();Oe=(e,t,r)=>(r=e.content?O(e):e,r._holder=e.previousSibling?._holder||e.previousSibling?.previousSibling?._holder,e.remove(),e[p]=null,r._holder._clauses.push(r._clause=[r,!0]),()=>{r._holder.update()})});var Te,je=f(()=>{d();Te=e=>(e.content&&e.replaceWith(e=O(e).childNodes[0]),t=>(t=m(t,e.textContent),e.textContent=t??""))});var we,$e=f(()=>{d();we=(e,t,r)=>(t=new Set,o=>{r=new Set,o&&oe(m(o,e.className)).split(" ").map(n=>n&&r.add(n));for(let n of t)r.has(n)?r.delete(n):e.classList.remove(n);for(let n of t=r)e.classList.add(n)})});var Ce,We=f(()=>{d();Ce=(e,t)=>(t=e.getAttribute("style"),r=>{if(r=m(r,e.style),typeof r=="string")A(e,"style",t+"; "+r);else{t&&A(e,"style",t);for(let o in r)o[0]=="-"?e.style.setProperty(o,r[o]):o[0]>"A"&&(e.style[o]=r[o])}})});var Pe,Ee=f(()=>{d();Pe=()=>e=>m(e)});var qe,Le=f(()=>{d();qe=(e,t,r,o)=>{try{let n=z(o,r),s=e.type==="checkbox"?()=>n(t,e.checked):e.type==="select-multiple"?()=>n(t,[...e.selectedOptions].map(i=>i.value)):()=>n(t,e.selectedIndex<0?null:e.value);e.oninput=e.onchange=s,e.type?.startsWith("select")&&(new MutationObserver(s).observe(e,{childList:!0,subtree:!0,attributes:!0}),y(e,t)),P[J(r)](t)??s()}catch{}return e.type==="text"||e.type===""?n=>e.setAttribute("value",e.value=n??""):e.tagName==="TEXTAREA"||e.type==="text"||e.type===""?(n,s,i)=>(s=e.selectionStart,i=e.selectionEnd,e.setAttribute("value",e.value=n??""),s&&e.setSelectionRange(s,i)):e.type==="checkbox"?n=>(e.checked=n,A(e,"checked",n)):e.type==="radio"?n=>e.value===n&&(e.checked=n,A(e,"checked",n)):e.type==="select-one"?n=>{for(let s of e.options)s.value==n?s.setAttribute("selected",""):s.removeAttribute("selected");e.value=n}:e.type==="select-multiple"?n=>{for(let s of e.options)s.removeAttribute("selected");for(let s of n)e.querySelector(`[value="${s}"]`).setAttribute("selected","")}:n=>e.value=n}});var De,Me=f(()=>{d();De=(e,t,r,o,n,s)=>typeof P[J(r)](t)=="function"?i=>i(e):z(o,r)(t,e)});var Ke,Ie=f(()=>{d();Ke=(e,t,r)=>(e[p]=null,r=T({},t),o=>(Object.assign(r,m(o,r)),e[p]??(delete e[p],F(()=>y(e,r)))))});var Re,Fe,Je=f(()=>{d();Re=(e,t,r)=>{let[o,n="$"]=r.split(/\bin\b/)[0].trim().replace(/\(|\)/g,"").split(/\s*,\s*/),s=document.createTextNode(""),i,a,c,h=0,g=$(()=>{var v,C;let l=0,u=c,x=u.length;if(i&&!i[k]){for(let b of i[N]||[])b[Symbol.dispose]();i=null,h=0}if(x<h)i.length=x;else{if(!i)i=u;else for(;l<h;)i[l]=u[l++];for(;l<x;l++){i[l]=u[l];let b=l,L=T({[o]:i[N]?.[b]?.peek?i[N]?.[b]:i[b],[n]:a?a[b]:b},t),S=e.content?O(e):e.cloneNode(!0);s.before(S.content||S),y(S,L);let D=((C=i[v=N]||(i[v]=[]))[l]||(C[l]={}))[Symbol.dispose];i[N][l][Symbol.dispose]=()=>{D?.(),S[Symbol.dispose]?.(),S.remove()}}}h=x});return e.replaceWith(s),e[p]=null,l=>(a=null,typeof l=="number"?c=Array.from({length:l},(u,x)=>x+1):l?.constructor===Object?(a=Object.keys(l),c=Object.values(l)):c=l||[],R(()=>{c[k]?.value,g()}))};Re.clean=e=>e.split(/\bin\b/)[1].trim();Fe=Re});var Ve,ve=f(()=>{d();Ve=(e,t,r,o)=>n=>A(e,o,m(n,e.getAttribute(o)))});var Be,He=f(()=>{d();Be=e=>t=>{for(let r in t)A(e,he(r),t[r])}});var Ze={};Ye(Ze,{batch:()=>se,computed:()=>ie,default:()=>st,effect:()=>Y,signal:()=>U,sprae:()=>y,start:()=>de,store:()=>V,untracked:()=>ae,use:()=>re});var it,Xe,ce,st,ze=f(()=>{G();Se();d();ke();Ne();je();$e();We();Ee();Le();Me();Ie();Je();ve();He();it={"*":Ve,"":Be,class:we,text:Te,style:Ce,fx:Pe,value:qe,ref:De,scope:Ke,if:Ae,else:Oe,each:Fe},Xe={debounce:(e,t=250,r=t==="tick"?queueMicrotask:t==="raf"?requestAnimationFrame:t==="idle"?requestIdleCallback:n=>setTimeout(n,t),o=0)=>(n,s=++o)=>r(()=>s==o&&e(n)),throttle:(e,t=250,r=t==="tick"?queueMicrotask:t==="raf"?requestAnimationFrame:o=>setTimeout(o,t))=>$(e,r),once:(e,t,r)=>Object.assign(o=>!t&&(t=1,e(o)),{once:!0}),prevent:e=>t=>(t?.preventDefault(),e(t)),stop:e=>t=>(t?.stopPropagation(),e(t)),immediate:e=>t=>(t?.stopImmediatePropagation(),e(t)),passive:e=>(e.passive=!0,e),capture:e=>(e.capture=!0,e),window:e=>(e.target=window,e),document:e=>(e.target=document,e),parent:e=>(e.target=e.target.parentNode,e),self:e=>t=>t.target===e.target&&e(t),outside:e=>(t,r)=>(r=e.target,!r.contains(t.target)&&t.target.isConnected&&(r.offsetWidth||r.offsetHeight))},ce={ctrl:e=>e.ctrlKey||e.key==="Control"||e.key==="Ctrl",shift:e=>e.shiftKey||e.key==="Shift",alt:e=>e.altKey||e.key==="Alt",meta:e=>e.metaKey||e.key==="Meta"||e.key==="Command",arrow:e=>e.key.startsWith("Arrow"),enter:e=>e.key==="Enter",esc:e=>e.key.startsWith("Esc"),tab:e=>e.key==="Tab",space:e=>e.key==="\xA0"||e.key==="Space"||e.key===" ",delete:e=>e.key==="Delete"||e.key==="Backspace",digit:e=>/^\d$/.test(e.key),letter:e=>/^\p{L}$/gu.test(e.key),char:e=>/^\S$/.test(e.key)};for(let e in ce)Xe[e]=(t,...r)=>o=>ce[e](o)&&r.every(n=>ce[n]?.(o)??o.key===n)&&t(o);re({directive:it,modifier:Xe,compile:e=>y.constructor(`with (arguments[0]) { return ${e} };`),signal:U,effect:Y,computed:ie,batch:se,untracked:ae});st=y});var{default:at,use:ct,start:lt}=(ze(),et(Ze));module.exports=at;ct({prefix:document.currentScript.getAttribute("prefix")||document.currentScript.dataset.spraePrefix||":"});lt();
;if (typeof module.exports == "object" && typeof exports == "object") {
  var __cp = (to, from, except, desc) => {
    if ((from && typeof from === "object") || typeof from === "function") {
      for (let key of Object.getOwnPropertyNames(from)) {
        if (!Object.prototype.hasOwnProperty.call(to, key) && key !== except)
        Object.defineProperty(to, key, {
          get: () => from[key],
          enumerable: !(desc = Object.getOwnPropertyDescriptor(from, key)) || desc.enumerable,
        });
      }
    }
    return to;
  };
  module.exports = __cp(module.exports, exports);
}
return module.exports;
}))
