(function (g, f) {if ("object" == typeof exports && "object" == typeof module) {module.exports = f();} else if ("function" == typeof define && define.amd) {define("sprae", [], f);} else if ("object" == typeof exports) {exports["sprae"] = f();} else {g["sprae"] = f();}}(typeof self !== 'undefined' ? self : typeof globalThis !== 'undefined' ? globalThis : this, () => {var exports = {};var module = { exports };
var et=Object.defineProperty;var Ut=Object.getOwnPropertyDescriptor;var Yt=Object.getOwnPropertyNames;var vt=Object.prototype.hasOwnProperty;var m=(t,r)=>()=>(t&&(r=t(t=0)),r);var _t=(t,r)=>{for(var e in r)et(t,e,{get:r[e],enumerable:!0})},te=(t,r,e,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of Yt(r))!vt.call(t,o)&&o!==e&&et(t,o,{get:()=>r[o],enumerable:!(n=Ut(r,o))||n.enumerable});return t};var ee=t=>te(et({},"__esModule",{value:!0}),t);var z,l,G,J,rt,w,T,V,nt,Q,B,D,H,ot,yt,re,U,st,ht,O,mt,oe,j,b,bt,x,it,C,gt,p,h=m(()=>{Y();Y();z=Symbol.dispose||(Symbol.dispose=Symbol("dispose")),l=Symbol("state"),G=Symbol("on"),J=Symbol("off"),rt=Symbol("add"),w=":",Q=t=>t(),B=Q,D={},H={},ot=null,yt=(t=document.body,r)=>{if(t[l])return Object.assign(t[l],r);r=L(r||{});let e=[],n=[],o,s=()=>!n&&(n=e.map(a=>a())),i=()=>(n?.map(a=>a()),n=null);t[G]=s,t[J]=i,t[z]||(t[z]=()=>(t[J](),t[J]=t[G]=t[z]=t[l]=t[rt]=null));let c=(a,f=a.attributes)=>{if(f)for(let d=0;d<f.length;){let{name:u,value:y}=f[d];if(u.startsWith(w)){if(a.removeAttribute(u),e.push(o=re(a,u,y,r)),n.push(o()),l in a)return}else d++}for(let d of[...a.childNodes])d.nodeType==1&&c(d)};return t[rt]=c,c(t),t[l]===void 0&&(t[l]=r),r},re=(t,r,e,n)=>{let o,s,i=r.slice(w.length).split("..").map((c,a,{length:f})=>c.split(w).reduce((d,u)=>{let[y,...g]=u.split("."),W=O(e,D[ot=y]?.parse);if(y.startsWith("on")){let E=y.slice(2),dt=M=>b(W(n),M),F=mt(Object.assign(f==1?dt:M=>(o=(a?o:dt)(M),s(),s=i[(a+1)%f]()),{target:t,type:E}),g);return M=>(M=d?.(),F.target.addEventListener(E,F,F),()=>(M?.(),F.target.removeEventListener(E,F)))}let $=(D[y]||D["*"])(t,n,e,y);if(!g.length&&!d)return()=>$&&V(()=>W(n,$));let S,q=T(-1),A=-1,Z=C(mt(()=>{++q.value||(S=V(()=>$&&(q.value==A?Z():(A=q.value,W(n,$)))))},g));return E=>(E=d?.(),Z(),{[y]:()=>(E?.(),S(),q.value=-1,A=S=null)}[y])},null));return()=>s=i[0]()},U=t=>(t.compile&&(ht=t.compile),t.prefix&&(w=t.prefix),t.signal&&(T=t.signal),t.effect&&(V=t.effect),t.computed&&(nt=t.computed),t.batch&&(Q=t.batch),t.untracked&&(B=t.untracked)),st=(t=document.body,r)=>{let e=L(r);return yt(t,e),new MutationObserver(o=>{for(let s of o)for(let i of s.addedNodes)if(i.nodeType===1&&i[l]===void 0){for(let c of i.attributes)if(c.name.startsWith(w)){t[rt](i);break}}}).observe(t,{childList:!0,subtree:!0}),e},O=(t,r,e)=>{if(e=O.cache[t])return e;let n=t.trim()||"undefined";r&&(n=r(n)),/^(if|let|const)\b/.test(n)||/;/.test(n)||(n=`return ${n}`),/\bawait\s/.test(n)&&(n=`return (async()=>{ ${n} })()`);try{e=ht(n),Object.defineProperty(e,"name",{value:`\u2234 ${t}`})}catch(o){console.error(`\u2234 ${o}

${w+ot}="${t}"`)}return O.cache[t]=(o,s,i)=>{try{let c=e?.(o);return s?(c?.then?c.then(a=>i=s(a)):i=s(c),()=>b(i)):c}catch(c){console.error(`\u2234 ${c}

${w+ot}="${t}"`)}}};O.cache={};mt=(t,r)=>{for(;r.length;){let[e,...n]=r.pop().split("-");t=oe(H[e]?.(t,...n)??t,t)}return t},oe=(t,r)=>{if(t!=r)for(let e in r)t[e]??(t[e]=r[e]);return t},j=t=>{if(!t.nodeType)return t;let r=t.content.cloneNode(!0),e=[...t.attributes],n=document.createTextNode(""),o=(r.append(n),[...r.childNodes]);return{childNodes:o,content:r,remove:()=>r.append(...o),replaceWith(s){s!==n&&(n.before(s),r.append(...o))},attributes:e,removeAttribute(s){e.splice(e.findIndex(i=>i.name===s),1)}}},b=(t,r)=>typeof t=="function"?t(r):t,bt=t=>t.replace(/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,(r,e)=>(e?"-":"")+r.toLowerCase()),x=(t,r,e)=>e==null||e===!1?t.removeAttribute(r):t.setAttribute(r,e===!0?"":e),it=(t,r=[])=>t?typeof t=="string"?t:(Array.isArray(t)?t.map(it):Object.entries(t).reduce((e,[n,o])=>o?[...e,n]:e,[])).join(" "):"",C=(t,r=queueMicrotask)=>{let e=0,n=o=>{e++||(t(o),r((s=e>1)=>(e=0,s&&n(o))))};return n},gt=(t,r=queueMicrotask,e=0)=>(n,o=++e)=>r(()=>o==e&&t(n)),p=yt});var P,k,at,K,ne,v,xt,L,Y=m(()=>{h();P=Symbol("signals"),k=Symbol("change"),at=Symbol("set"),K=(t,r=globalThis)=>{if(!t||t[Symbol.toStringTag]||t[P])return t;if(t.constructor!==Object)return Array.isArray(t)?ne(t):t;let e=Object.keys(t).length,n={},o=new Proxy(Object.assign(n,{[k]:T(e),[P]:n}),{get:(i,c)=>c in n?n[c]?n[c].valueOf():n[c]:r[c],set:(i,c,a,f)=>(c in n?xt(n,c,a):(v(n,c,a),n[k].value=++e),1),deleteProperty:(i,c)=>(c in n&&(c[0]!="_"&&n[c]?.[Symbol.dispose]?.(),delete n[c],n[k].value=--e),1),ownKeys:()=>(n[k].value,Reflect.ownKeys(n)),has:i=>1}),s=Object.getOwnPropertyDescriptors(t);for(let i in t)s[i]?.get?(n[i]=nt(s[i].get.bind(o)))[at]=s[i].set?.bind(o):v(n,i,t[i]);return o},ne=(t,r=globalThis)=>{let e=Array(t.length).fill(null),n=!1,o=c=>function(){return n=!0,c.apply(this,arguments)},s=T(t.length),i=new Proxy(Object.assign(e,{[k]:s,[P]:e,push:o(e.push),pop:o(e.pop),shift:o(e.shift),unshift:o(e.unshift),splice:o(e.splice)}),{get(c,a){return a==="length"?n?(n=!1,e.length):s.value:typeof a=="symbol"||isNaN(a)?e[a]?.valueOf()??r[a]:(e[a]??(e[a]=T(K(t[a])))).valueOf()},set(c,a,f){if(a==="length"){for(let d=f;d<e.length;d++)delete i[d];s.value=e.length=f}else a>=e.length?(v(e,a,f),i.length=+a+1):e[a]?xt(e,a,f):v(e,a,f);return 1},deleteProperty:(c,a)=>(e[a]?.[Symbol.dispose]?.(),delete e[a],1)});return i},v=(t,r,e)=>t[r]=r[0]=="_"||e?.peek?e:T(K(e)),xt=(t,r,e,n,o)=>r[0]==="_"?t[r]=e:e!==(o=(n=t[r]).peek())&&(n[at]?n[at](e):Array.isArray(e)&&Array.isArray(o)?k in o?B(()=>Q(()=>{for(let s=0;s<e.length;s++)o[s]=e[s];o.length=e.length})):n.value=e:n.value=K(e)),L=K});var N,St,I,_,tt,ct,ut,lt,At=m(()=>{St=0,_=(t,r,e=new Set,n=()=>r.value)=>r={get value(){return N?.deps.push(e.add(N)),t},set value(o){if(o!==t){t=o;for(let s of e)I?I.add(s):s()}},peek(){return t},toJSON:n,then:n,toString:n,valueOf:n},tt=(t,r,e,n,o)=>(e=s=>{if(o=r,r=null,o?.call?.(),s=N,N=e,St++>10)throw"Cycle detected";try{r=t()}finally{N=s,St--}},n=e.deps=[],e(),s=>{for(r?.call?.();s=n.pop();)s.delete(e)}),ct=(t,r=_(),e,n,o=()=>e.value)=>e={get value(){return n||(n=tt(()=>r.value=t())),r.value},peek:r.peek,toJSON:o,then:o,toString:o,valueOf:o},ut=(t,r=!I)=>{I??(I=new Set);try{t()}finally{if(r){for(let e of I)e();I=null}}},lt=(t,r,e)=>(r=N,N=null,e=t(),N=r,e)});var Ot,kt=m(()=>{h();Ot=(t,r,e,n,o)=>{var s;return t._holder?p(n=t,r):(t[s=l]??(t[s]=null),n=t.content?j(t):t,t.replaceWith(e=document.createTextNode("")),n._holder=e._holder=e,e._clauses=[n._clause=[n,!1]],e.update=C(()=>{let i=e._clauses.find(([,c])=>c);i!=o&&(o?.[0].remove(),o?.[0][J]?.(),(o=i)&&(e.before(o[0].content||o[0]),o[0][l]?o[0][G]?.():(delete o[0][l],p(o[0],r))))})),i=>{n._clause[1]=i,n._holder.update()}}});var jt,Nt=m(()=>{h();jt=(t,r,e,n,o=t)=>{for(e=t.content?j(t):t;o&&!(e._holder=o._holder);)o=o.previousSibling;return t.remove(),t[l]=null,e._holder._clauses.push(e._clause=[e,!0]),()=>{e._holder.update()}}});var $t,wt=m(()=>{h();$t=t=>(t.content&&t.replaceWith(t=j(t).childNodes[0]),r=>(r=b(r,t.textContent),t.textContent=r??""))});var Tt,Ct=m(()=>{h();Tt=(t,r,e)=>(r=new Set,n=>{e=new Set,n&&it(b(n,t.className)).split(" ").map(o=>o&&e.add(o));for(let o of r)e.has(o)?e.delete(o):t.classList.remove(o);for(let o of r=e)t.classList.add(o)})});var Pt,Wt=m(()=>{h();Pt=(t,r)=>(r=t.getAttribute("style"),e=>{if(e=b(e,t.style),typeof e=="string")x(t,"style",r+"; "+e);else{r&&x(t,"style",r);for(let n in e)n[0]=="-"?t.style.setProperty(n,e[n]):n[0]>"A"&&(t.style[n]=e[n])}})});var qt,Et=m(()=>{h();qt=()=>t=>b(t)});var se,Mt,Dt=m(()=>{h();se=(t,r=O(`${t}=__`))=>(e,n)=>{e.__=n,r(e),delete e.__},Mt=(t,r,e,n)=>{try{let o=se(e),s=t.type==="checkbox"?()=>o(r,t.checked):t.type==="select-multiple"?()=>o(r,[...t.selectedOptions].map(i=>i.value)):()=>o(r,t.selectedIndex<0?null:t.value);t.oninput=t.onchange=s,t.type?.startsWith("select")&&(new MutationObserver(s).observe(t,{childList:!0,subtree:!0,attributes:!0}),p(t,r)),O(e)(r)??s()}catch{}return t.type==="text"||t.type===""?o=>t.setAttribute("value",t.value=o??""):t.tagName==="TEXTAREA"||t.type==="text"||t.type===""?(o,s,i)=>(s=t.selectionStart,i=t.selectionEnd,t.setAttribute("value",t.value=o??""),s&&t.setSelectionRange(s,i)):t.type==="checkbox"?o=>(t.checked=o,x(t,"checked",o)):t.type==="radio"?o=>t.value===o&&(t.checked=o,x(t,"checked",o)):t.type==="select-one"?o=>{for(let s of t.options)s.value==o?s.setAttribute("selected",""):s.removeAttribute("selected");t.value=o}:t.type==="select-multiple"?o=>{for(let s of t.options)s.removeAttribute("selected");for(let s of o)t.querySelector(`[value="${s}"]`).setAttribute("selected","")}:o=>t.value=o}});var Lt,Kt=m(()=>{h();Lt=(t,r,e,n,o,s)=>typeof O(e)(r)=="function"?i=>i(t):(Object.defineProperty(r,e,{value:t,configurable:!0}),()=>{})});var It,Rt=m(()=>{h();It=(t,r,e)=>(t[l]=null,e=K({},r),n=>{let o=b(n,e);for(let s in o)e[s]=typeof o[s]=="function"?o[s].bind(e):o[s];return t[l]??(delete t[l],B(()=>p(t,e)))})});var Ft,Jt,Vt=m(()=>{h();Ft=(t,r,e)=>{let[n,o="$"]=e.split(/\bin\b/)[0].trim().replace(/\(|\)/g,"").split(/\s*,\s*/),s=document.createTextNode(""),i,c,a,f=0,d=C(()=>{var W,$;let u=0,y=a,g=y.length;if(i&&!i[k]){for(let S of i[P]||[])S[Symbol.dispose]();i=null,f=0}if(g<f)i.length=g;else{if(!i)i=y;else for(;u<f;)i[u]=y[u++];for(;u<g;u++){i[u]=y[u];let S=u,q=Object.create(r,{[n]:{get:()=>i[S]},[o]:{value:c?c[S]:S}}),A=t.content?j(t):t.cloneNode(!0);s.before(A.content||A),p(A,q);let Z=(($=i[W=P]||(i[W]=[]))[u]||($[u]={}))[Symbol.dispose];i[P][u][Symbol.dispose]=()=>{Z?.(),A[Symbol.dispose]?.(),A.remove()}}}f=g});return t.replaceWith(s),t[l]=null,u=>(c=null,typeof u=="number"?a=Array.from({length:u},(y,g)=>g+1):u?.constructor===Object?(c=Object.keys(u),a=Object.values(u)):a=u||[],V(()=>{a[k]?.value,d()}))};Ft.parse=t=>t.split(/\bin\b/)[1].trim();Jt=Ft});var Bt,Ht=m(()=>{h();Bt=(t,r,e,n)=>o=>x(t,n,b(o,t.getAttribute(n)))});var Xt,Zt=m(()=>{h();Xt=t=>r=>{for(let e in r)x(t,bt(e),r[e])}});var zt={};_t(zt,{batch:()=>ut,computed:()=>ct,default:()=>ie,effect:()=>tt,signal:()=>_,sprae:()=>p,start:()=>st,store:()=>L,untracked:()=>lt,use:()=>U});var ft,ie,Gt=m(()=>{Y();At();h();kt();Nt();wt();Ct();Wt();Et();Dt();Kt();Rt();Vt();Ht();Zt();Object.assign(D,{"*":Bt,"":Xt,class:Tt,text:$t,style:Pt,fx:qt,value:Mt,ref:Lt,scope:It,if:Ot,else:jt,each:Jt});Object.assign(H,{debounce:(t,r=250,e=r==="tick"?queueMicrotask:r==="raf"?requestAnimationFrame:r==="idle"?requestIdleCallback:o=>setTimeout(o,r),n=0)=>gt(t,e),throttle:(t,r=250,e=r==="tick"?queueMicrotask:r==="raf"?requestAnimationFrame:n=>setTimeout(n,r))=>C(t,e),once:(t,r,e)=>Object.assign(n=>!r&&(r=1,t(n)),{once:!0}),prevent:t=>r=>(r?.preventDefault(),t(r)),stop:t=>r=>(r?.stopPropagation(),t(r)),immediate:t=>r=>(r?.stopImmediatePropagation(),t(r)),passive:t=>(t.passive=!0,t),capture:t=>(t.capture=!0,t),window:t=>(t.target=window,t),document:t=>(t.target=document,t),parent:t=>(t.target=t.target.parentNode,t),self:t=>r=>r.target===t.target&&t(r),outside:t=>(r,e)=>(e=t.target,!e.contains(r.target)&&r.target.isConnected&&(e.offsetWidth||e.offsetHeight))});ft={ctrl:t=>t.ctrlKey||t.key==="Control"||t.key==="Ctrl",shift:t=>t.shiftKey||t.key==="Shift",alt:t=>t.altKey||t.key==="Alt",meta:t=>t.metaKey||t.key==="Meta"||t.key==="Command",arrow:t=>t.key.startsWith("Arrow"),enter:t=>t.key==="Enter",esc:t=>t.key.startsWith("Esc"),tab:t=>t.key==="Tab",space:t=>t.key==="\xA0"||t.key==="Space"||t.key===" ",delete:t=>t.key==="Delete"||t.key==="Backspace",digit:t=>/^\d$/.test(t.key),letter:t=>/^\p{L}$/gu.test(t.key),char:t=>/^\S$/.test(t.key)};for(let t in ft)H[t]=(r,...e)=>n=>ft[t](n)&&e.every(o=>ft[o]?.(n)??n.key===o)&&r(n);U({compile:t=>p.constructor(`with (arguments[0]) { ${t} }`),signal:_,effect:tt,computed:ct,batch:ut,untracked:lt});p.use=U;p.store=L;p.directive=D;p.modifier=H;p.start=st;ie=p});var pt=(Gt(),ee(zt)).default;module.exports=pt;var R=document.currentScript,Qt=R.getAttribute("prefix")??R.dataset.prefix??R.dataset.spraePrefix,X=R.getAttribute("start")??R.dataset.start??R.dataset.spraeStart;Qt&&pt.use({prefix:Qt});X!=null&&X!=="false"&&(X&&X!=="true"?document.querySelectorAll(X):[document.body]).forEach(t=>pt.start(t));
;if (typeof module.exports == "object" && typeof exports == "object") {
  var __cp = (to, from, except, desc) => {
    if ((from && typeof from === "object") || typeof from === "function") {
      for (let key of Object.getOwnPropertyNames(from)) {
        if (!Object.prototype.hasOwnProperty.call(to, key) && key !== except)
        Object.defineProperty(to, key, {
          get: () => from[key],
          enumerable: !(desc = Object.getOwnPropertyDescriptor(from, key)) || desc.enumerable,
        });
      }
    }
    return to;
  };
  module.exports = __cp(module.exports, exports);
}
return module.exports;
}))
