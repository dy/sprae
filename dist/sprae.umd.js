(function (g, f) {if ("object" == typeof exports && "object" == typeof module) {module.exports = f();} else if ("function" == typeof define && define.amd) {define("sprae", [], f);} else if ("object" == typeof exports) {exports["sprae"] = f();} else {g["sprae"] = f();}}(typeof self !== 'undefined' ? self : typeof globalThis !== 'undefined' ? globalThis : this, () => {var exports = {};var module = { exports };
var oe=Object.defineProperty;var _e=Object.getOwnPropertyDescriptor;var et=Object.getOwnPropertyNames;var tt=Object.prototype.hasOwnProperty;var d=(e,r)=>()=>(e&&(r=e(e=0)),r);var rt=(e,r)=>{for(var t in r)oe(e,t,{get:r[t],enumerable:!0})},ot=(e,r,t,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of et(r))!tt.call(e,n)&&n!==t&&oe(e,n,{get:()=>r[n],enumerable:!(o=_e(r,n))||o.enumerable});return e};var nt=e=>ot(oe({},"__esModule",{value:!0}),e);var z,l,Q,B,ne,M,w,F,se,U,H,L,X,ie,be,it,Y,ae,xe,q,he,ge,G,$,m,Se,A,ue,C,Ae,f,y=d(()=>{v();v();z=Symbol.dispose||(Symbol.dispose=Symbol("dispose")),l=Symbol("state"),Q=Symbol("on"),B=Symbol("off"),ne=Symbol("init"),M=":",U=e=>e(),H=U,L={},X={},ie=null,be=(e=document.body,r)=>{if(e[l])return Object.assign(e[l],r);r=K(r||{});let t=[],o=[];e[Q]=()=>!o&&(o=t.map(i=>i())),e[B]=()=>(o?.map(i=>i()),o=null),e[z]||(e[z]=()=>(e[B](),e[B]=e[Q]=e[z]=e[ne]=e[l]=null));let n=e[ne]=i=>{let s=i.attributes,a;if(s)for(let u=0;u<s.length;){let{name:p,value:g}=s[u];if(p.startsWith(M)){if(i.removeAttribute(p),(a=it(i,p,g,r))&&(t.push(a),o.push(a())),l in i)return}else u++}for(let u of[...i.childNodes])u.nodeType==1&&n(u)};return n(e),e[l]===void 0&&(e[l]=r),r},it=(e,r,t,o)=>{let n,i,s=r.slice(M.length).split("..").map((a,u,{length:p})=>a.split(M).reduce((g,c)=>{let[h,...b]=c.split("."),D=q(t,L[ie=h]?.parse).bind(e);if(h.startsWith("on")){let V=h.slice(2),J=ge(G(p==1?W=>D(o,re=>m(re,W)):W=>(n=(u?n:re=>m(D(o),re))(W),i(),i=s[(u+1)%p]()),{target:e}),b);return W=>(W=g?.(),J.target.addEventListener(V,J,J),()=>(W?.(),J.target.removeEventListener(V,J)))}let k,x,j,S;b.length?(j=w(-1),S=-1,k=ge(G(C(()=>{++j.value||(x=F(()=>P&&(j.value==S?k():(S=j.value,D(o,P)))))}),{target:e}),b)):k=G(()=>x=F(()=>D(o,P)),{target:e});let P=(L[h]||L["*"])(k.target,o,t,h);if(P)return e[l]&&(o=e[l]),V=>(V=g?.(),k(),()=>(V?.(),x?.(),j&&(j.value=-1,S=x=null)))},null));return()=>i=s[0]?.()},Y=e=>(e.compile&&(xe=e.compile),e.prefix&&(M=e.prefix),e.signal&&(w=e.signal),e.effect&&(F=e.effect),e.computed&&(se=e.computed),e.batch&&(U=e.batch),e.untracked&&(H=e.untracked)),ae=(e=document.body,r)=>{let t=K(r);return be(e,t),new MutationObserver(n=>{for(let i of n)for(let s of i.addedNodes)s.nodeType===1&&s[l]===void 0&&e.contains(s)&&e[ne](s)}).observe(e,{childList:!0,subtree:!0}),t},q=(e,r,t)=>{if(t=he[e])return t;let o=e.trim()||"undefined";r&&(o=r(o)),/^(if|let|const)\b/.test(o)||/;(?![^{]*})/.test(o)||(o=`return ${o}`),/\bawait\s/.test(o)&&(o=`return (async()=>{ ${o} })()`);try{t=xe(o),Object.defineProperty(t,"name",{value:`\u2234 ${e}`})}catch(n){console.error(`\u2234 ${n}

${M+ie}="${e}"`)}return he[e]=function(n,i,s){try{let a=t?.call(this,n);return i?(a?.then?a.then(u=>s=i(u)):s=i(a),()=>m(s)):a}catch(a){console.error(`\u2234 ${a}

${M+ie}="${e}"`)}}},he={},ge=(e,r)=>{for(;r.length;){let[t,...o]=r.pop().split("-");e=G(X[t]?.(e,...o)??e,e)}return e},G=(e,r)=>{if(e!=r)for(let t in r)e[t]??(e[t]=r[t]);return e},$=e=>{if(!e.nodeType)return e;let r=e.content.cloneNode(!0),t=[...e.attributes],o=document.createTextNode(""),n=(r.append(o),[...r.childNodes]);return{childNodes:n,content:r,remove:()=>r.append(...n),replaceWith(i){i!==o&&(o.before(i),r.append(...n))},attributes:t,removeAttribute(i){t.splice(t.findIndex(s=>s.name===i),1)}}},m=(e,r)=>typeof e=="function"?e(r):e,Se=e=>e.replace(/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,(r,t)=>(t?"-":"")+r.toLowerCase()),A=(e,r,t)=>t==null||t===!1?e.removeAttribute(r):e.setAttribute(r,t===!0?"":t),ue=(e,r=[])=>e?typeof e=="string"?e:(Array.isArray(e)?e.map(ue):Object.entries(e).reduce((t,[o,n])=>n?[...t,o]:t,[])).join(" "):"",C=(e,r=queueMicrotask)=>{let t=0,o=n=>{t++||(e(n),r((i=t>1)=>(t=0,i&&o(n))))};return o},Ae=(e,r=queueMicrotask,t=0)=>(o,n=++t)=>r(()=>n==t&&e(o)),f=be});var O,N,le,ce,E,st,_,Oe,K,v=d(()=>{y();O=Symbol("signals"),N=Symbol("change"),le=Symbol("set"),ce=!0,E=(e,r)=>{if(!e||e[Symbol.toStringTag]||e[O])return e;if(e.constructor!==Object)return Array.isArray(e)?st(e):e;let t=Object.keys(e).length,o={},n=new Proxy(Object.assign(o,{[N]:w(t),[O]:o}),{get:(s,a)=>a in o?o[a]?o[a].valueOf():o[a]:r?r[a]:globalThis[a],set:(s,a,u,p)=>a in o?(Oe(o,a,u),1):(ce=!1,r&&a in r?r[a]=u:(_(o,a,u),o[N].value=++t),ce=!0,1),deleteProperty:(s,a)=>(a in o&&(a[0]!="_"&&o[a]?.[Symbol.dispose]?.(),delete o[a],o[N].value=--t),1),ownKeys:()=>(o[N].value,Reflect.ownKeys(o)),has:(s,a)=>a in o?!0:r?a in r:ce}),i=Object.getOwnPropertyDescriptors(e);for(let s in e)i[s]?.get?(o[s]=se(i[s].get.bind(n)))[le]=i[s].set?.bind(n):_(o,s,e[s]);return n},st=(e,r=globalThis)=>{let t=Array(e.length).fill(null),o=!1,n=a=>function(){return o=!0,a.apply(this,arguments)},i=w(e.length),s=new Proxy(Object.assign(t,{[N]:i,[O]:t,push:n(t.push),pop:n(t.pop),shift:n(t.shift),unshift:n(t.unshift),splice:n(t.splice)}),{get(a,u){return u==="length"?o?(o=!1,t.length):i.value:typeof u=="symbol"||isNaN(u)?t[u]?.valueOf()??r[u]:(t[u]??(t[u]=w(E(e[u])))).valueOf()},set(a,u,p){if(u==="length"){for(let g=p;g<t.length;g++)delete s[g];i.value=t.length=p}else u>=t.length?(_(t,u,p),s.length=+u+1):t[u]?Oe(t,u,p):_(t,u,p);return 1},deleteProperty:(a,u)=>(t[u]?.[Symbol.dispose]?.(),delete t[u],1)});return s},_=(e,r,t)=>e[r]=r[0]=="_"||t?.peek?t:w(E(t)),Oe=(e,r,t,o,n)=>r[0]==="_"?e[r]=t:t!==(n=(o=e[r]).peek())&&(o[le]?o[le](t):Array.isArray(t)&&Array.isArray(n)?N in n?H(()=>U(()=>{for(let i=0;i<t.length;i++)n[i]=t[i];n.length=t.length})):o.value=t:o.value=E(t)),K=E});var T,we,I,ee,te,fe,pe,de,Ne=d(()=>{we=0,ee=(e,r,t=new Set,o=()=>r.value)=>r={get value(){return T?.deps.push(t.add(T)),e},set value(n){if(n!==e){e=n;for(let i of t)I?I.add(i):i()}},peek(){return e},toJSON:o,then:o,toString:o,valueOf:o},te=(e,r,t,o,n)=>(t=i=>{if(n=r,r=null,n?.call?.(),i=T,T=t,we++>10)throw"Cycle detected";try{r=e()}finally{T=i,we--}},o=t.deps=[],t(),i=>{for(r?.call?.();i=o.pop();)i.delete(t)}),fe=(e,r=ee(),t,o,n=()=>t.value)=>t={get value(){return o||(o=te(()=>r.value=e())),r.value},peek:r.peek,toJSON:n,then:n,toString:n,valueOf:n},pe=(e,r=!I)=>{I??(I=new Set);try{e()}finally{if(r){for(let t of I)t();I=null}}},de=(e,r,t)=>(r=T,T=null,t=e(),T=r,t)});var ke,je=d(()=>{y();ke=(e,r,t,o,n)=>{var i;return e._holder?f(o=e,r):(e[i=l]??(e[i]=null),o=e.content?$(e):e,e.replaceWith(t=document.createTextNode("")),o._holder=t._holder=t,t._clauses=[o._clause=[o,!1]],t.update=C(()=>{let s=t._clauses.find(([,a])=>a);s!=n&&(n?.[0].remove(),n?.[0][B]?.(),(n=s)&&(t.before(n[0].content||n[0]),n[0][l]?n[0][Q]?.():(delete n[0][l],f(n[0],r))))})),s=>{o._clause[1]=s,o._holder.update()}}});var $e,Te=d(()=>{y();$e=(e,r,t,o,n=e)=>{for(t=e.content?$(e):e;n&&!(t._holder=n._holder);)n=n.previousSibling;return e.remove(),e[l]=null,t._holder._clauses.push(t._clause=[t,!0]),t._holder.update}});var De,Ce=d(()=>{y();De=e=>(e.content&&e.replaceWith(e=$(e).childNodes[0]),r=>(r=m(r,e.textContent),e.textContent=r??""))});var Ee,Pe=d(()=>{y();Ee=(e,r,t)=>(r=new Set,o=>{t=new Set,o&&ue(m(o,e.className)).split(" ").map(n=>n&&t.add(n));for(let n of r)t.has(n)?t.delete(n):e.classList.remove(n);for(let n of r=t)e.classList.add(n)})});var We,Le=d(()=>{y();We=(e,r)=>(r=e.getAttribute("style"),t=>{if(t=m(t,e.style),typeof t=="string")A(e,"style",r+"; "+t);else{r&&A(e,"style",r);for(let o in t)o[0]=="-"?e.style.setProperty(o,t[o]):o[0]>"A"&&(e.style[o]=t[o])}})});var Me,qe=d(()=>{y();Me=()=>m});var at,Ke,Ie=d(()=>{y();at=(e,r=q(`${e}=__`))=>(t,o)=>{t.__=o,r(t),delete t.__},Ke=(e,r,t,o)=>{try{let n=at(t),i=e.type==="checkbox"?()=>n(r,e.checked):e.type==="select-multiple"?()=>n(r,[...e.selectedOptions].map(s=>s.value)):()=>n(r,e.selectedIndex<0?null:isNaN(e.valueAsNumber)?e.value:e.valueAsNumber);e.oninput=e.onchange=i,e.type?.startsWith("select")&&(new MutationObserver(i).observe(e,{childList:!0,subtree:!0,attributes:!0}),f(e,r)),q(t)(r)??i()}catch{}return e.type==="text"||e.type===""||e.tagName==="TEXTAREA"?(n,i,s)=>(i=e.selectionStart,s=e.selectionEnd,e.setAttribute("value",e.value=n??""),i&&e.setSelectionRange(i,s)):e.type==="checkbox"?n=>(e.checked=n,A(e,"checked",n)):e.type==="radio"?n=>e.value===n&&(e.checked=n,A(e,"checked",n)):e.type==="select-one"?n=>{for(let i of e.options)i.value==n?i.setAttribute("selected",""):i.removeAttribute("selected");e.value=n}:e.type==="select-multiple"?n=>{for(let i of e.options)i.removeAttribute("selected");for(let i of n)e.querySelector(`[value="${i}"]`).setAttribute("selected","")}:n=>e.value=n}});var Re,Ve=d(()=>{y();Re=(e,r,t,o,n,i)=>{if(typeof q(t)(r)=="function")return s=>s(e);Object.defineProperty(r,t,{value:e,configurable:!0})}});var Je,Be=d(()=>{y();Je=(e,r)=>{let t=e[l]=E({},r),o=!1;return n=>{if(n=m(n,t),n!==t)for(let i in n){let s=typeof n[i]=="function"?n[i].bind(t):n[i];i in t[O]?t[i]=s:t[O][i]=i[0]=="_"||s?.peek?s:w(E(s))}return!o&&(o=!0,delete e[l],H(()=>f(e,t)))}}});var Fe,He,Xe=d(()=>{y();Fe=(e,r,t)=>{let[o,n="$"]=t.split(/\bin\b/)[0].trim().replace(/\(|\)/g,"").split(/\s*,\s*/),i=document.createTextNode(""),s,a,u,p=0,g=C(()=>{var D,k;let c=0,h=u,b=h.length;if(s&&!s[N]){for(let x of s[O]||[])x[Symbol.dispose]();s=null,p=0}if(b<p)s.length=b;else{if(!s)s=h;else for(;c<p;)s[c]=h[c++];for(;c<b;c++){s[c]=h[c];let x=c,j=Object.create(r,{[o]:{get:()=>s[x]},[n]:{value:a?a[x]:x}}),S=e.content?$(e):e.cloneNode(!0);i.before(S.content||S),f(S,j);let P=((k=s[D=O]||(s[D]=[]))[c]||(k[c]={}))[Symbol.dispose];s[O][c][Symbol.dispose]=()=>{P?.(),S[Symbol.dispose]?.(),S.remove()}}}p=b});return e.replaceWith(i),e[l]=null,c=>(a=null,typeof c=="number"?u=Array.from({length:c},(h,b)=>b+1):c?.constructor===Object?(a=Object.keys(c),u=Object.values(c)):u=c||[],F(()=>{u[N]?.value,g()}))};Fe.parse=e=>e.split(/\bin\b/)[1].trim();He=Fe});var Ze,ze=d(()=>{y();Ze=(e,r,t,o)=>n=>A(e,o,m(n,e.getAttribute(o)))});var Ge,Qe=d(()=>{y();Ge=e=>r=>{for(let t in r)A(e,Se(t),r[t])}});var Ue={};rt(Ue,{batch:()=>pe,computed:()=>fe,default:()=>ut,effect:()=>te,signal:()=>ee,sprae:()=>f,start:()=>ae,store:()=>K,untracked:()=>de,use:()=>Y});var me,ut,Ye=d(()=>{v();Ne();y();je();Te();Ce();Pe();Le();qe();Ie();Ve();Be();Xe();ze();Qe();Object.assign(L,{"*":Ze,"":Ge,class:Ee,text:De,style:We,fx:Me,value:Ke,ref:Re,scope:Je,if:ke,else:$e,each:He});Object.assign(X,{debounce:(e,r=250)=>Ae(e,(r||(r=0),t=>setTimeout(t,r))),throttle:(e,r=250)=>C(e,(r||(r=0),t=>setTimeout(t,r))),tick:e=>r=>queueMicrotask(()=>e(r)),raf:e=>r=>requestAnimationFrame(()=>e(r)),once:(e,r,t)=>Object.assign(o=>!r&&(r=1,e(o)),{once:!0}),window:e=>(e.target=e.target.ownerDocument.defaultView,e),document:e=>(e.target=e.target.ownerDocument,e),root:e=>(e.target=e.target.ownerDocument.documentElement,e),body:e=>(e.target=e.target.ownerDocument.body,e),parent:e=>(e.target=e.target.parentNode,e),self:e=>r=>r.target===e.target&&e(r),outside:e=>(r,t)=>(t=e.target,!t.contains(r.target)&&r.target.isConnected&&(t.offsetWidth||t.offsetHeight)),prevent:e=>r=>(r?.preventDefault(),e(r)),stop:e=>r=>(r?.stopPropagation(),e(r)),immediate:e=>r=>(r?.stopImmediatePropagation(),e(r)),passive:e=>(e.passive=!0,e),capture:e=>(e.capture=!0,e)});me={ctrl:e=>e.ctrlKey||e.key==="Control"||e.key==="Ctrl",shift:e=>e.shiftKey||e.key==="Shift",alt:e=>e.altKey||e.key==="Alt",meta:e=>e.metaKey||e.key==="Meta"||e.key==="Command",arrow:e=>e.key.startsWith("Arrow"),enter:e=>e.key==="Enter",esc:e=>e.key.startsWith("Esc"),tab:e=>e.key==="Tab",space:e=>e.key==="\xA0"||e.key==="Space"||e.key===" ",delete:e=>e.key==="Delete"||e.key==="Backspace",digit:e=>/^\d$/.test(e.key),letter:e=>/^\p{L}$/gu.test(e.key),char:e=>/^\S$/.test(e.key)};for(let e in me)X[e]=(r,...t)=>o=>me[e](o)&&t.every(n=>me[n]?.(o)??o.key===n)&&r(o);Y({compile:e=>f.constructor(`with (arguments[0]) { ${e} }`),signal:ee,effect:te,computed:fe,batch:pe,untracked:de});f.use=Y;f.store=K;f.directive=L;f.modifier=X;f.start=ae;f.version="12.2.4";ut=f});var ye=(Ye(),nt(Ue)).default;module.exports=ye;var R=document.currentScript,ve=R.getAttribute("prefix")??R.dataset.prefix??R.dataset.spraePrefix,Z=R.getAttribute("start")??R.dataset.start??R.dataset.spraeStart;ve&&ye.use({prefix:ve});Z!=null&&Z!=="false"&&(Z&&Z!=="true"?document.querySelectorAll(Z):[document.body||document.documentElement]).forEach(e=>ye.start(e));
;if (typeof module.exports == "object" && typeof exports == "object") {
  var __cp = (to, from, except, desc) => {
    if ((from && typeof from === "object") || typeof from === "function") {
      for (let key of Object.getOwnPropertyNames(from)) {
        if (!Object.prototype.hasOwnProperty.call(to, key) && key !== except)
        Object.defineProperty(to, key, {
          get: () => from[key],
          enumerable: !(desc = Object.getOwnPropertyDescriptor(from, key)) || desc.enumerable,
        });
      }
    }
    return to;
  };
  module.exports = __cp(module.exports, exports);
}
return module.exports;
}))
