var O,S=(e,r,t=new Set)=>(r={get value(){return O?.deps.push(t.add(O)),e},set value(i){if(i!==e){e=i;for(let n of t)n()}},peek(){return e}},r.toJSON=r.then=r.toString=r.valueOf=()=>r.value,r),x=(e,r,t,i)=>(t=n=>{r?.call?.(),n=O,O=t;try{r=e()}finally{O=n}},i=t.deps=[],t(),n=>{for(r?.call?.();n=i.pop();)n.delete(t)}),F=(e,r=S(),t,i)=>(t={get value(){return i||(i=x(()=>r.value=e())),r.value},peek:r.peek},t.toJSON=t.then=t.toString=t.valueOf=()=>t.value,t),W=e=>e(),J=W,te=e=>(S=e.signal,x=e.effect,F=e.computed,W=e.batch||W,J=e.untracked||J),_=Symbol("signals"),N=Symbol("change"),E="__",$=(e,r)=>{if(!e||e[_]||e[Symbol.toStringTag])return e;if(e.constructor!==Object)return Array.isArray(e)?re(e):e;let t={...r?.[_]},i=S(Object.keys(e).length),n,a=new Proxy(t,{get:(u,l)=>l===N?i:l===_?t:l===E?n:t[l]?.valueOf(),set:(u,l,d,h)=>(l===E?n=d:h=l in t,K(t,l,d),h||++i.value),deleteProperty:(u,l)=>(t[l]&&(t[l][Symbol.dispose]?.(),delete t[l],i.value--),1),ownKeys:()=>(i.value,Reflect.ownKeys(t))}),s=Object.getOwnPropertyDescriptors(e);for(let u in e)s[u]?.get?(t[u]=F(s[u].get.bind(a)))._set=s[u].set?.bind(a):(t[u]=null,K(t,u,e[u]));return a},re=e=>{let r,t=S(e.length),i=Array(e.length).fill(),n=new Proxy(i,{get(a,s){return typeof s=="symbol"?s===N?t:s===_?i:i[s]:s==="length"?ie.includes(r)?t.peek():t.value:(r=s,(i[s]??(i[s]=S($(e[s])))).valueOf())},set(a,s,u){if(s==="length"){for(let l=u;l<i.length;l++)delete n[l];t.value=i.length=u}else K(i,s,u),s>=t.peek()&&(t.value=i.length=+s+1);return 1},deleteProperty:(a,s)=>(i[s]?.[Symbol.dispose]?.(),delete i[s],1)});return n},ie=["push","pop","shift","unshift","splice"],K=(e,r,t)=>{let i=e[r],n;r[0]==="_"?e[r]=t:i?t===(n=i.peek())||(i._set?i._set(t):Array.isArray(t)&&Array.isArray(n)?n[N]?W(()=>{for(let a=0;a<t.length;a++)n[a]=t[a];n.length=t.length}):i.value=t:i.value=$(t)):e[r]=i=t?.peek?t:S($(t))},V=(e,r=M(`${e}=${E}`))=>(t,i)=>(t[E]=i,r(t)),B=(e,r,t=r.match(/^\w+(?=\s*(?:\.|\[|$))/))=>{var i,n;return t&&((i=e[_])[n=t[0]]??(i[n]=null))},H=$,X=Symbol.dispose||(Symbol.dispose=Symbol("dispose")),m=Symbol("state"),I=Symbol("on"),j=Symbol("off"),T={},y=(e,r,t=M)=>T[e]=(i,n,a,s,u,l)=>(l=t(n),u=r(i,a,n,s,l),()=>u(l(a))),Z=(e=document.body,r)=>{if(e[m])return Object.assign(e[m],r);let t=$(r||{}),i=[],n=[],a=(s,u=s.attributes)=>{if(u)for(let l=0;l<u.length;){let{name:d,value:h}=u[l],o,c;if(d.startsWith(R)){s.removeAttribute(d);for(c of d.slice(R.length).split(":"))if(o=(T[c]||T.default)(s,h,t,c),n.push(o),i.push(x(o)),s[m]===null)return}else l++}for(let l of s.childNodes)l.nodeType==1&&a(l)};return a(e),m in e||(e[m]=t,e[j]=()=>(i.map(s=>s()),i=[]),e[I]=()=>i=n.map(s=>x(s)),e[X]=()=>(e[j](),e[j]=e[I]=e[X]=e[m]=null)),t};Z.use=e=>(e.signal&&te(e),e.compile&&(Q=e.compile),e.prefix&&(R=e.prefix));var M=(e,r,t)=>{if(t=z[e=e.trim()])return t;try{t=Q(e)}catch(i){G(i,r,e)}return z[e]=t},z={},G=(e,r="",t="")=>{throw Object.assign(e,{message:`\u2234 ${e.message}

${r}${t?`="${t}"

`:""}`,expr:t})},Q,R=":",L=e=>{if(!e.nodeType)return e;let r=e.content.cloneNode(!0),t=[...e.attributes],i=document.createTextNode(""),n=(r.append(i),[...r.childNodes]);return{childNodes:n,content:r,remove:()=>r.append(...n),replaceWith(a){a!==i&&(i.before(a),r.append(...n))},attributes:t,removeAttribute(a){t.splice(t.findIndex(s=>s.name===a),1)}}},k=Z,U=Symbol("if");y("if",(e,r)=>{let t=document.createTextNode(""),i=e.nextElementSibling,n,a,s;return e.replaceWith(t),a=e.content?L(e):e,a[m]=null,i?.hasAttribute(":else")&&(i.removeAttribute(":else"),i.hasAttribute(":if")||(i.remove(),s=i.content?L(i):i,s[m]=null)),(u,l=u?a:e[U]?null:s)=>{i&&(i[U]=l===a),n!=l&&(n&&(n.remove(),n[j]?.()),(n=l)&&(t.before(n.content||n),n[m]===null?(delete n[m],k(n,r)):n[I]()))}}),y("each",(e,r,t)=>{let[i,n="$"]=t.split(/\bin\b/)[0].trim().split(/\s*,\s*/),a=document.createTextNode(""),s,u,l,d=0,h=()=>{var o,c;let p=0,b=l,g=b.length;if(s&&!s[N]){for(let v of s[_]||[])v[Symbol.dispose]();s=null,d=0}if(g<d)s.length=g;else{if(!s)s=b;else for(;p<d;)s[p]=b[p++];for(;p<g;p++){s[p]=b[p];let v=p,C=H({[i]:s[_]?.[v]||s[v],[n]:u?u[v]:v},r),A=e.content?L(e):e.cloneNode(!0);a.before(A.content||A),k(A,C),((c=s[o=_]||(s[o]=[]))[p]||(c[p]={}))[Symbol.dispose]=()=>{A[Symbol.dispose]?.(),A.remove()}}}d=g};return e.replaceWith(a),e[m]=null,o=>{u=null,typeof o=="number"?l=Array.from({length:o},(p,b)=>b+1):o?.constructor===Object?(u=Object.keys(o),l=Object.values(o)):l=o||[];let c=0;return x(()=>{l[N]?.value,c++||(h(),queueMicrotask(()=>(c>1&&h(),c=0)))})}},e=>M(e.split(/\bin\b/)[1])),y("ref",(e,r,t,i,n)=>(B(r,t),n(r)==null?(V(t)(r,e),a=>a):a=>a.call(null,e))),y("with",(e,r,t)=>(t=null,i=>k(e,t?i:t=H(i,r)))),y("text",e=>(e.content&&e.replaceWith(e=L(e).childNodes[0]),r=>e.textContent=r??"")),y("class",(e,r)=>(r=new Set,t=>{let i=new Set;t&&(typeof t=="string"?t.split(" ").map(n=>i.add(n)):Array.isArray(t)?t.map(n=>n&&i.add(n)):Object.entries(t).map(([n,a])=>a&&i.add(n)));for(let n of r)i.has(n)?i.delete(n):e.classList.remove(n);for(let n of r=i)e.classList.add(n)})),T.className=T.class,y("style",(e,r)=>(r=e.getAttribute("style"),t=>{if(typeof t=="string")e.setAttribute("style",r+(r.endsWith(";")?"":"; ")+t);else{r&&e.setAttribute("style",r);for(let i in t)i[0]=="-"?e.style.setProperty(i,t[i]):e.style[i]=t[i]}})),y("default",(e,r,t,i)=>{if(!i.startsWith("on"))return i?o=>P(e,i,o):o=>{for(let c in o)P(e,Y(c),o[c])};let n=i.split("..").map(o=>{let c={evt:"",target:e,test:()=>!0};return c.evt=(o.startsWith("on")?o.slice(2):o).replace(/\.(\w+)?-?([-\w]+)?/g,(p,b,g="")=>(c.test=ne[b]?.(c,...g.split("-"))||c.test,"")),c}),a=(o,{evt:c,target:p,test:b,defer:g,stop:v,prevent:C,immediate:A,...q},D)=>(g&&(o=g(o)),D=w=>{try{b(w)&&(v&&(A?w.stopImmediatePropagation():w.stopPropagation()),C&&w.preventDefault(),o?.call(r,w))}catch(ee){G(ee,`:on${c}`,o)}},p.addEventListener(c,D,q),()=>p.removeEventListener(c,D,q));if(n.length==1)return o=>a(o,n[0]);let s,u,l,d=0,h=o=>{l=a(c=>(l(),u=o?.(c),(d=++d%n.length)?h(u):s&&h(s)),n[d])};return o=>(s=o,!l&&h(s),()=>s=null)});var ne={prevent(e){e.prevent=!0},stop(e){e.stop=!0},immediate(e){e.immediate=!0},once(e){e.once=!0},passive(e){e.passive=!0},capture(e){e.capture=!0},window(e){e.target=window},document(e){e.target=document},parent(e){e.target=e.target.parentNode},throttle(e,r=108){e.defer=t=>se(t,r)},debounce(e,r=108){e.defer=t=>ae(t,r)},outside:e=>r=>{let t=e.target;return!(t.contains(r.target)||r.target.isConnected===!1||t.offsetWidth<1&&t.offsetHeight<1)},self:e=>r=>r.target===e.target,ctrl:(e,...r)=>t=>f.ctrl(t)&&r.every(i=>f[i]?f[i](t):t.key===i),shift:(e,...r)=>t=>f.shift(t)&&r.every(i=>f[i]?f[i](t):t.key===i),alt:(e,...r)=>t=>f.alt(t)&&r.every(i=>f[i]?f[i](t):t.key===i),meta:(e,...r)=>t=>f.meta(t)&&r.every(i=>f[i]?f[i](t):t.key===i),arrow:()=>f.arrow,enter:()=>f.enter,esc:()=>f.esc,tab:()=>f.tab,space:()=>f.space,delete:()=>f.delete,digit:()=>f.digit,letter:()=>f.letter,char:()=>f.char},f={ctrl:e=>e.ctrlKey||e.key==="Control"||e.key==="Ctrl",shift:e=>e.shiftKey||e.key==="Shift",alt:e=>e.altKey||e.key==="Alt",meta:e=>e.metaKey||e.key==="Meta"||e.key==="Command",arrow:e=>e.key.startsWith("Arrow"),enter:e=>e.key==="Enter",esc:e=>e.key.startsWith("Esc"),tab:e=>e.key==="Tab",space:e=>e.key==="\xA0"||e.key==="Space"||e.key===" ",delete:e=>e.key==="Delete"||e.key==="Backspace",digit:e=>/^\d$/.test(e.key),letter:e=>/^\p{L}$/gu.test(e.key),char:e=>/^\S$/.test(e.key)},se=(e,r)=>{let t,i,n=a=>{t=!0,setTimeout(()=>{if(t=!1,i)return i=!1,n(a),e(a)},r)};return a=>t?i=!0:(n(a),e(a))},ae=(e,r)=>{let t;return i=>{clearTimeout(t),t=setTimeout(()=>{t=null,e(i)},r)}},P=(e,r,t)=>{t==null||t===!1?e.removeAttribute(r):e.setAttribute(r,t===!0?"":typeof t=="number"||typeof t=="string"?t:"")},Y=e=>e.replace(/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,(r,t)=>(t?"-":"")+r.toLowerCase());y("value",(e,r,t)=>{const i=e.type==="text"||e.type===""?n=>e.setAttribute("value",e.value=n??""):e.tagName==="TEXTAREA"||e.type==="text"||e.type===""?(n,a,s)=>(a=e.selectionStart,s=e.selectionEnd,e.setAttribute("value",e.value=n??""),a&&e.setSelectionRange(a,s)):e.type==="checkbox"?n=>(e.checked=n,P(e,"checked",n)):e.type==="select-one"?n=>{for(let a of e.options)a.value==n?a.setAttribute("selected",""):a.removeAttribute("selected");e.value=n}:e.type==="select-multiple"?n=>{for(let a of e.options)a.removeAttribute("selected");for(let a of n)e.querySelector(`[value="${a}"]`).setAttribute("selected","")}:n=>e.value=n;B(r,t);try{const n=V(t),a=e.type==="checkbox"?()=>n(r,e.checked):e.type==="select-multiple"?()=>n(r,[...e.selectedOptions].map(s=>s.value)):()=>n(r,e.selectedIndex<0?null:e.value);e.oninput=e.onchange=a,e.type?.startsWith("select")&&(new MutationObserver(a).observe(e,{childList:!0,subtree:!0,attributes:!0}),k(e,r))}catch{}return i}),y("fx",e=>r=>r),y("aria",e=>r=>{for(let t in r)P(e,"aria-"+Y(t),r[t]==null?null:r[t]+"")}),y("data",e=>r=>{for(let t in r)e.dataset[t]=r[t]}),k.use({compile:e=>k.constructor(`with (arguments[0]) { return ${e} };`)});var le=k;export{le as default};
