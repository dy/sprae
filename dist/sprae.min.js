var O,w=(e,n,t=new Set)=>(n={get value(){return O?.deps.push(t.add(O)),e},set value(r){if(r!==e){e=r;for(let i of t)i()}},peek(){return e}},n.toJSON=n.then=n.toString=n.valueOf=()=>n.value,n),x=(e,n,t,r)=>(t=i=>{n?.call?.(),i=O,O=t;try{n=e()}finally{O=i}},r=t.deps=[],t(),i=>{for(n?.call?.();i=r.pop();)i.delete(t)}),R=(e,n=w(),t,r)=>(t={get value(){return r||(r=x(()=>n.value=e())),n.value},peek:n.peek},t.toJSON=t.then=t.toString=t.valueOf=()=>t.value,t),E=e=>e(),Q=E;function U(e){w=e.signal,x=e.effect,R=e.computed,E=e.batch||E,Q=e.untracked||E}var A=Symbol("signals"),$=Symbol("change");function S(e,n){if(!e||e[A])return e;if(Array.isArray(e))return ee(e);if(e.constructor!==Object||e[Symbol.toStringTag])return e;let t={...n?.[A]},r=w(Object.values(e).length);const i=new Proxy(t,{get:(o,s)=>s===$?r:s===A?t:t[s]?.valueOf(),set:(o,s,u,l)=>(l=t[s],P(t,s,u),l??++r.value,1),deleteProperty:(o,s)=>(t[s]&&(q(t,s),r.value--),1),ownKeys(){return r.value,Reflect.ownKeys(t)}});for(let o in e){const s=Object.getOwnPropertyDescriptor(e,o);s?.get?(t[o]=R(s.get.bind(i)))._set=s.set?.bind(i):(t[o]=void 0,P(t,o,e[o]))}return i}var Y={push:1,pop:1,shift:1,unshift:1,splice:1};function ee(e){let n;if(e[A])return e;let t=w(e.length),r=Array(e.length).fill();const i=new Proxy(r,{get(o,s){if(typeof s=="symbol")return s===$?t:s===A?r:r[s];if(s==="length")return Y[n]?t.peek():t.value;if(n=s,r[s])return r[s].valueOf();if(s<r.length)return(r[s]=w(S(e[s]))).value},set(o,s,u){if(s==="length"){for(let l=u,p=r.length;l<p;l++)delete i[l];return t.value=r.length=u,!0}return P(r,s,u),s>=t.peek()&&(t.value=r.length=Number(s)+1),!0},deleteProperty:(o,s)=>(r[s]&&q(r,s),1)});return i}function P(e,n,t){let r=e[n];if(n[0]==="_")e[n]=t;else if(!r)e[n]=r=t?.peek?t:w(S(t));else if(t!==r.peek())if(r._set)r._set(t);else if(Array.isArray(t)&&Array.isArray(r.peek())){const i=r.peek();i[$]?E(()=>{let o=0,s=t.length;for(;o<s;o++)i[o]=t[o];i.length=s}):r.value=t}else r.value=S(t)}function q(e,n){const t=e[n],r=t[Symbol.dispose];r&&delete t[Symbol.dispose],delete e[n],r?.()}var F=Symbol.dispose||(Symbol.dispose=Symbol("dispose")),h=Symbol("state"),C=Symbol("on"),T=Symbol("off"),D={},m=(e,n,t=K)=>D[e]=(r,i,o,s,u,l)=>(l=t(i),u=n(r,o,i,s,l),()=>u(l(o)));function v(e,n){if(!e?.childNodes)return;if(h in e)return Object.assign(e[h],n);const t=S(n||{}),r=[],i=[];return o(e),h in e||(e[h]=t,e[T]=()=>{for(;r.length;)r.pop()()},e[C]=()=>r.push(...i.map(s=>x(s))),e[F]=()=>(e[T](),e[T]=e[C]=e[F]=e[h]=null)),t;function o(s){if(s.childNodes){for(let u=0;u<s.attributes?.length;){let l=s.attributes[u],p;if(l.name[0]===":"){s.removeAttribute(l.name);for(let y of l.name.slice(1).split(":"))if(p=(D[y]||D.default)(s,l.value,t,y),i.push(p),r.push(x(p)),h in s)return}else u++}for(let u of[...s.childNodes])o(u)}}}var J={},K=(e,n)=>{let t;if(t=J[e=e.trim()])return t;try{t=B(e)}catch(r){V(r,n,e)}return J[e]=t},V=(e,n,t="")=>{throw Object.assign(e,{message:`\u2234 ${e.message}

${n||""}${t?`="${t}"

`:""}`,expr:t})},B;v.use=e=>{e.signal&&U(e),e.compile&&(B=e.compile)};var W=e=>{if(!e.nodeType)return e;let n=e.content.cloneNode(!0),t=[...e.attributes],r=document.createTextNode(""),i=(n.append(r),[...n.childNodes]);return{childNodes:i,content:n,remove:()=>n.append(...i),replaceWith(o){o!==r&&(r.before(o),n.append(...i))},attributes:t,removeAttribute(o){t.splice(t.findIndex(s=>s.name===o),1)},setAttributeNode(){}}},H=Symbol("if");m("if",(e,n)=>{const t=document.createTextNode("");let r=e.nextElementSibling,i,o,s;return e.replaceWith(t),o=e.content?W(e):e,o[h]=null,r?.hasAttribute(":else")&&(r.removeAttribute(":else"),r.hasAttribute(":if")||(r.remove(),s=r.content?W(r):r,s[h]=null)),u=>{const l=u?o:e[H]?null:s;r&&(r[H]=l===o),i!=l&&(i&&(i.remove(),i[T]?.()),(i=l)&&(t.before(i.content||i),i[h]===null&&delete i[h],i[h]?i[C]():v(i,n)))}}),m("each",(e,n,t)=>{const[r,i="$"]=t.split(/\s+in\s+/)[0].split(/\s*,\s*/),o=document.createTextNode("");e.replaceWith(o),e[h]=null;let s,u,l,p=0;const y=()=>{var a,c;let d=0,b=l,g=b.length;if(s&&!s[$]){for(let _ of s[A]||[])_[Symbol.dispose]();s=null,p=0}if(g<p)s.length=g;else{if(!s)s=b;else for(;d<p;)s[d]=b[d++];for(;d<g;d++){s[d]=b[d];let _=d,L=S({[r]:s[A]?.[_]||s[_],[i]:u?u[_]:_},n),k=e.content?W(e):e.cloneNode(!0);o.before(k.content||k),v(k,L),((c=s[a=A]||(s[a]=[]))[d]||(c[d]={}))[Symbol.dispose]=()=>{k[Symbol.dispose]?.(),k.remove()}}}p=g};return a=>{u=null,typeof a=="number"?l=Array.from({length:a},(d,b)=>b+1):a?.constructor===Object?(u=Object.keys(a),l=Object.values(a)):l=a||[];let c=0;return x(()=>{l[$]?.value,c++||(y(),queueMicrotask(()=>(c>1&&y(),c=0)))})}},e=>K(e.split(/\s+in\s+/)[1])),m("default",(e,n,t,r)=>{if(!r.startsWith("on"))return r?a=>j(e,r,a):a=>{for(let c in a)j(e,X(c),a[c])};const i=r.split("..").map(a=>{let c={evt:"",target:e,test:()=>!0};return c.evt=(a.startsWith("on")?a.slice(2):a).replace(/\.(\w+)?-?([-\w]+)?/g,(d,b,g="")=>(c.test=te[b]?.(c,...g.split("-"))||c.test,"")),c}),o=(a,{evt:c,target:d,test:b,defer:g,stop:_,prevent:L,immediate:k,...I})=>{g&&(a=g(a));const M=N=>{try{b(N)&&(_&&(k?N.stopImmediatePropagation():N.stopPropagation()),L&&N.preventDefault(),a?.call(n,N))}catch(G){V(G,`:on${c}`,a)}};return d.addEventListener(c,M,I),()=>d.removeEventListener(c,M,I)};if(i.length==1)return a=>o(a,i[0]);let s,u,l,p=0;const y=a=>{l=o(c=>(l(),u=a?.(c),(p=++p%i.length)?y(u):s&&y(s)),i[p])};return a=>(s=a,!l&&y(s),()=>s=null)});var te={prevent(e){e.prevent=!0},stop(e){e.stop=!0},immediate(e){e.immediate=!0},once(e){e.once=!0},passive(e){e.passive=!0},capture(e){e.capture=!0},window(e){e.target=window},document(e){e.target=document},parent(e){e.target=e.target.parentNode},throttle(e,n){e.defer=t=>re(t,n?Number(n)||0:108)},debounce(e,n){e.defer=t=>ne(t,n?Number(n)||0:108)},outside:e=>n=>{let t=e.target;return!(t.contains(n.target)||n.target.isConnected===!1||t.offsetWidth<1&&t.offsetHeight<1)},self:e=>n=>n.target===e.target,ctrl:(e,...n)=>t=>f.ctrl(t)&&n.every(r=>f[r]?f[r](t):t.key===r),shift:(e,...n)=>t=>f.shift(t)&&n.every(r=>f[r]?f[r](t):t.key===r),alt:(e,...n)=>t=>f.alt(t)&&n.every(r=>f[r]?f[r](t):t.key===r),meta:(e,...n)=>t=>f.meta(t)&&n.every(r=>f[r]?f[r](t):t.key===r),arrow:()=>f.arrow,enter:()=>f.enter,esc:()=>f.esc,tab:()=>f.tab,space:()=>f.space,delete:()=>f.delete,digit:()=>f.digit,letter:()=>f.letter,char:()=>f.char},f={ctrl:e=>e.ctrlKey||e.key==="Control"||e.key==="Ctrl",shift:e=>e.shiftKey||e.key==="Shift",alt:e=>e.altKey||e.key==="Alt",meta:e=>e.metaKey||e.key==="Meta"||e.key==="Command",arrow:e=>e.key.startsWith("Arrow"),enter:e=>e.key==="Enter",esc:e=>e.key.startsWith("Esc"),tab:e=>e.key==="Tab",space:e=>e.key==="\xA0"||e.key==="Space"||e.key===" ",delete:e=>e.key==="Delete"||e.key==="Backspace",digit:e=>/^\d$/.test(e.key),letter:e=>/^\p{L}$/gu.test(e.key),char:e=>/^\S$/.test(e.key)},re=(e,n)=>{let t,r,i=o=>{t=!0,setTimeout(()=>{if(t=!1,r)return r=!1,i(o),e(o)},n)};return o=>t?r=!0:(i(o),e(o))},ne=(e,n)=>{let t;return r=>{clearTimeout(t),t=setTimeout(()=>{t=null,e(r)},n)}},j=(e,n,t)=>{t==null||t===!1?e.removeAttribute(n):e.setAttribute(n,t===!0?"":typeof t=="number"||typeof t=="string"?t:"")},X=e=>e.replace(/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,(n,t)=>(t?"-":"")+n.toLowerCase());m("value",(e,n,t)=>{const r=e.type==="text"||e.type===""?i=>e.setAttribute("value",e.value=i??""):e.tagName==="TEXTAREA"||e.type==="text"||e.type===""?(i,o,s)=>(o=e.selectionStart,s=e.selectionEnd,e.setAttribute("value",e.value=i??""),o&&e.setSelectionRange(o,s)):e.type==="checkbox"?i=>(e.checked=i,j(e,"checked",i)):e.type==="select-one"?i=>{for(let o of e.options)o.value==i?o.setAttribute("selected",""):o.removeAttribute("selected");e.value=i}:e.type==="select-multiple"?i=>{for(let o of e.options)o.removeAttribute("selected");for(let o of i)e.querySelector(`[value="${o}"]`).setAttribute("selected","")}:i=>e.value=i;z(n,t);try{const i=Z(t),o=e.type==="checkbox"?()=>i(n,e.checked):e.type==="select-multiple"?()=>i(n,[...e.selectedOptions].map(s=>s.value)):()=>i(n,e.selectedIndex<0?null:e.value);e.oninput=e.onchange=o,e.type?.startsWith("select")&&(new MutationObserver(o).observe(e,{childList:!0,subtree:!0,attributes:!0}),v(e,n))}catch{}return r});var Z=(e,n=K(`${e}=__`))=>(t,r)=>(t.__=r,n(t,r),delete t.__),z=(e,n,t=n.match(/^\w+(?=\s*(?:\.|\[|$))/))=>{var r;return t&&(e[r=t[0]]||(e[r]=null))};m("ref",(e,n,t,r,i)=>(z(n,t),i(n)==null?(Z(t)(n,e),o=>o):o=>o.call(null,e))),m("with",(e,n,t)=>(t=null,r=>v(e,t?r:t=S(r,n)))),m("text",e=>(e.content&&e.replaceWith(e=W(e).childNodes[0]),n=>e.textContent=n??"")),m("class",(e,n)=>(n=new Set,t=>{let r=new Set;t&&(typeof t=="string"?t.split(" ").map(i=>r.add(i)):Array.isArray(t)?t.map(i=>i&&r.add(i)):Object.entries(t).map(([i,o])=>o&&r.add(i)));for(let i of n)r.has(i)?r.delete(i):e.classList.remove(i);for(let i of n=r)e.classList.add(i)})),m("style",(e,n)=>(n=e.getAttribute("style"),t=>{if(typeof t=="string")e.setAttribute("style",n+(n.endsWith(";")?"":"; ")+t);else{n&&e.setAttribute("style",n);for(let r in t)r[0]=="-"?e.style.setProperty(r,t[r]):e.style[r]=t[r]}})),m("fx",e=>n=>n),m("aria",e=>n=>{for(let t in n)j(e,"aria-"+X(t),n[t]==null?null:n[t]+"")}),m("data",e=>n=>{for(let t in n)e.dataset[t]=n[t]}),v.use({compile:e=>v.constructor(`with (arguments[0]) { return ${e} };`)});var ie=v;export{ie as default};
