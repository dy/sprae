(function($,g){typeof exports=="object"&&typeof module=="object"?module.exports=g():typeof define=="function"&&define.amd?define("sprae",[],g):typeof exports=="object"?exports.sprae=g():$.sprae=g()})(typeof self<"u"?self:typeof globalThis<"u"?globalThis:void 0,()=>{var $={},g={exports:$},R=Object.defineProperty,ve=Object.getOwnPropertyDescriptor,ee=Object.getOwnPropertyNames,ge=Object.prototype.hasOwnProperty,p=(e,r)=>function(){return e&&(r=(0,e[ee(e)[0]])(e=0)),r},te=(e,r)=>{for(var t in r)R(e,t,{get:r[t],enumerable:!0})},_e=(e,r,t,i)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of ee(r))!ge.call(e,s)&&s!==t&&R(e,s,{get:()=>r[s],enumerable:!(i=ve(r,s))||i.enumerable});return e},je=e=>_e(R({},"__esModule",{value:!0}),e);function we(e){C=e.signal,y=e.effect,B=e.computed,q=e.batch||(r=>r()),F=e.untracked||q}var C,y,F,q,B,b=p({"signal.js"(){}});function P(e,r){if(!e||e[w])return e;if(Array.isArray(e))return xe(e);if(e.constructor!==Object)return e;let t={...r?.[w]},i=C(Object.values(e).length);const s=new Proxy(t,{get:(a,n)=>n===E?i:n===w?t:t[n]?.valueOf(),set:(a,n,o,u)=>(u=t[n],H(t,n,o),u??++i.value,1),deleteProperty:(a,n)=>(t[n]&&(re(t,n),i.value--),1),ownKeys(){return i.value,Reflect.ownKeys(t)}});for(let a in e){const n=Object.getOwnPropertyDescriptor(e,a);n?.get?(t[a]=B(n.get.bind(s)))._set=n.set?.bind(s):(t[a]=void 0,H(t,a,e[a]))}return s}function xe(e){let r;if(e[w])return e;let t=C(e.length),i=Array(e.length).fill();const s=new Proxy(i,{get(a,n){if(typeof n=="symbol")return n===E?t:n===w?i:i[n];if(n==="length")return ie[r]?t.peek():t.value;if(r=n,i[n])return i[n].valueOf();if(n<i.length)return(i[n]=C(P(e[n]))).value},set(a,n,o){if(n==="length"){for(let u=o,_=i.length;u<_;u++)delete s[u];return t.value=i.length=o,!0}return H(i,n,o),n>=t.peek()&&(t.value=i.length=Number(n)+1),!0},deleteProperty:(a,n)=>(i[n]&&re(i,n),1)});return s}function H(e,r,t){let i=e[r];if(r[0]==="_")e[r]=t;else if(!i)e[r]=i=t?.peek?t:C(P(t));else if(t!==i.peek())if(i._set)i._set(t);else if(Array.isArray(t)&&Array.isArray(i.peek())){const s=i.peek();s[E]?F(()=>{q(()=>{let a=0,n=t.length;for(;a<n;a++)s[a]=t[a];s.length=n})}):i.value=t}else i.value=P(t)}function re(e,r){const t=e[r],i=t[Symbol.dispose];i&&delete t[Symbol.dispose],delete e[r],i?.()}var w,E,ie,I=p({"store.js"(){b(),w=Symbol("signals"),E=Symbol("length"),ie={push:1,pop:1,shift:1,unshift:1,splice:1}}});function x(e,r){if(!e?.childNodes)return;if(v.has(e))return Object.assign(v.get(e),r);const t=P(r||{}),i=[];return s(e),v.has(e)||v.set(e,t),e[J]=()=>{for(;i.length;)i.pop()();v.delete(e)},t;function s(a,n=a.parentNode){if(!!a.childNodes){for(let o=0;o<a.attributes?.length;){let u=a.attributes[o];if(u.name[0]===":"){a.removeAttribute(u.name);let _=u.name.slice(1).split(":");for(let A of _){let f=d[A]||d.default,l=(f.parse||L)(u.value),j=f(a,l,t,A);j&&i.push(j)}if(v.has(a))return a[J]&&i.push(a[J]);if(a.parentNode!==n)return}else o++}for(let o of[...a.childNodes])s(o,a)}}}var J,d,v,V,L,X,ne,D,m=p({"core.js"(){b(),I(),J=Symbol.dispose||(Symbol.dispose=Symbol("dispose")),d={},v=new WeakMap,V={},L=(e,r,t)=>{if(t=V[e=e.trim()])return t;try{t=ne(e)}catch(i){X(i,r,e)}return V[e]=t},X=(e,r,t="")=>{throw Object.assign(e,{message:`\u2234 ${e.message}

${r}${t?`="${t}"

`:""}`,expr:t})},x.use=e=>{e.signal&&we(e),e.compile&&(ne=e.compile)},D=e=>{if(!e.nodeType)return e;let r=e.content.cloneNode(!0),t=[...e.attributes],i=document.createTextNode(""),s=(r.append(i),[...r.childNodes]);return{childNodes:s,content:r,remove:()=>r.append(...s),replaceWith(a){a!==i&&(i.before(a),r.append(...s))},attributes:t,removeAttribute(a){t.splice(t.findIndex(n=>n.name===a),1)}}}}}),se={};te(se,{batch:()=>oe,computed:()=>ae,effect:()=>z,signal:()=>Z,untracked:()=>le});var k,T,Z,z,ae,oe,le,Oe=p({"node_modules/ulive/dist/ulive.es.js"(){Z=(e,r,t=new Set)=>(r={get value(){return k?.deps.push(t.add(k)),e},set value(i){if(i!==e){e=i;for(let s of t)T?T.add(s):s()}},peek(){return e}},r.toJSON=r.then=r.toString=r.valueOf=()=>r.value,r),z=(e,r,t,i)=>(t=s=>{r?.call?.(),s=k,k=t;try{r=e()}finally{k=s}},i=t.deps=[],t(),s=>{for(r?.call?.();s=i.pop();)s.delete(t)}),ae=(e,r=Z(),t,i)=>(t={get value(){return i||(i=z(()=>r.value=e())),r.value},peek:r.peek},t.toJSON=t.then=t.toString=t.valueOf=()=>t.value,t),oe=e=>{let r=T;r||(T=new Set);try{e()}finally{if(!r){r=T,T=null;for(const t of r)t()}}},le=(e,r,t)=>(r=k,k=null,t=e(),k=r,t)}}),G,ke=p({"directive/if.js"(){m(),b(),G=Symbol("if"),d.if=(e,r,t)=>{let i=e.nextElementSibling,s=document.createTextNode(""),a,n,o;return e.replaceWith(s),n=e.content?D(e):e,v.set(n,null),i?.hasAttribute(":else")&&(i.removeAttribute(":else"),i.hasAttribute(":if")||(i.remove(),o=i.content?D(i):i,v.set(o,null))),y(()=>{const u=r(t)?n:e[G]?null:o;i&&(i[G]=u===n),a!=u&&(a?.remove(),(a=u)&&(s.before(a.content||a),v.get(a)===null&&v.delete(a),x(a,t)))})}}}),Ae=p({"directive/each.js"(){m(),I(),b(),d.each=(e,[r,t,i],s)=>{const a=document.createTextNode("");e.replaceWith(a);let n,o,u=0;const _=B(()=>{o=null;let l=i(s);return typeof l=="number"&&(l=Array.from({length:l},(j,h)=>h+1)),l?.constructor===Object&&(o=Object.keys(l),l=Object.values(l)),l||[]}),A=()=>{F(()=>{var l,j;let h=0,O=_.value,W=O.length;if(n&&!n[E]){for(let S of n[w]||[])S[Symbol.dispose]();n=null,u=0}if(W<u)n.length=W;else{if(!n)n=O;else for(;h<u;h++)n[h]=O[h];for(;h<W;h++){n[h]=O[h];let S=h,Y=P({[r]:n[w]?.[S]||n[S],[t]:o?o[S]:S},s),N=e.content?D(e):e.cloneNode(!0);a.before(N.content||N),x(N,Y),((j=n[l=w]||(n[l]=[]))[h]||(j[h]={}))[Symbol.dispose]=()=>{N[Symbol.dispose](),N.remove()}}}u=W})};let f=0;return y(()=>{_.value[E]?.value,f?f++:(A(),queueMicrotask(()=>(f&&A(),f=0)))})},d.each.parse=e=>{let[r,t]=e.split(/\s+in\s+/),[i,s="$"]=r.split(/\s*,\s*/);return[i,s,L(t)]}}}),Se=p({"directive/ref.js"(){m(),I(),d.ref=(e,r,t)=>{t[r]=e},d.ref.parse=e=>e}}),Ne=p({"directive/with.js"(){m(),I(),b(),d.with=(e,r,t)=>{let i;return y(()=>{let s=r(t);x(e,i?s:i=P(s,t))})}}}),Ie={},ue=p({"directive/html.js"(){m(),d.html=(e,r,t)=>{let i=r(t);if(!i)return;let s=(i.content||i).cloneNode(!0);e.replaceChildren(s),x(e,t)}}}),Pe=p({"directive/text.js"(){m(),b(),d.text=(e,r,t)=>(e.content&&e.replaceWith(e=D(e).childNodes[0]),y(()=>{let i=r(t);e.textContent=i??""}))}}),Ee=p({"directive/class.js"(){m(),b(),d.class=(e,r,t)=>{let i=new Set;return y(()=>{let s=r(t),a=new Set;s&&(typeof s=="string"?s.split(" ").map(n=>a.add(n)):Array.isArray(s)?s.map(n=>n&&a.add(n)):Object.entries(s).map(([n,o])=>o&&a.add(n)));for(let n of i)a.has(n)?a.delete(n):e.classList.remove(n);for(let n of i=a)e.classList.add(n)})}}}),Te=p({"directive/style.js"(){m(),b(),d.style=(e,r,t)=>{let i=e.getAttribute("style");return y(()=>{let s=r(t);if(typeof s=="string")e.setAttribute("style",i+(i.endsWith(";")?"":"; ")+s);else{i&&e.setAttribute("style",i);for(let a in s)a[0]=="-"?e.style.setProperty(a,s[a]):e.style[a]=s[a]}})}}}),ce,c,K,fe,de,Q,U=p({"directive/default.js"(){m(),b(),d.default=(e,r,t,i)=>{if(!i.startsWith("on"))return y(()=>{let f=r(t);if(i)K(e,i,f);else for(let l in f)K(e,Q(l),f[l])});const s=i.split("..").map(f=>{let l={evt:"",target:e,test:()=>!0};return l.evt=(f.startsWith("on")?f.slice(2):f).replace(/\.(\w+)?-?([-\w]+)?/g,(j,h,O="")=>(l.test=ce[h]?.(l,...O.split("-"))||l.test,"")),l});if(s.length==1)return y(()=>A(r(t),s[0]));let a,n,o,u=0;const _=f=>{o=A(l=>(o(),n=f?.(l),(u=++u%s.length)?_(n):a&&_(a)),s[u])};return y(()=>(a=r(t),!o&&_(a),()=>a=null));function A(f,{evt:l,target:j,test:h,defer:O,stop:W,prevent:S,immediate:Y,...N}){O&&(f=O(f));const be=M=>{try{h(M)&&(W&&(Y?M.stopImmediatePropagation():M.stopPropagation()),S&&M.preventDefault(),f?.(M))}catch(Me){X(Me,`:on${l}`,f)}};return j.addEventListener(l,be,N),()=>j.removeEventListener(l,be,N)}},ce={prevent(e){e.prevent=!0},stop(e){e.stop=!0},immediate(e){e.immediate=!0},once(e){e.once=!0},passive(e){e.passive=!0},capture(e){e.capture=!0},window(e){e.target=window},document(e){e.target=document},throttle(e,r){e.defer=t=>fe(t,r?Number(r)||0:108)},debounce(e,r){e.defer=t=>de(t,r?Number(r)||0:108)},outside:e=>r=>{let t=e.target;return!(t.contains(r.target)||r.target.isConnected===!1||t.offsetWidth<1&&t.offsetHeight<1)},self:e=>r=>r.target===e.target,ctrl:(e,...r)=>t=>c.ctrl(t)&&r.every(i=>c[i]?c[i](t):t.key===i),shift:(e,...r)=>t=>c.shift(t)&&r.every(i=>c[i]?c[i](t):t.key===i),alt:(e,...r)=>t=>c.alt(t)&&r.every(i=>c[i]?c[i](t):t.key===i),meta:(e,...r)=>t=>c.meta(t)&&r.every(i=>c[i]?c[i](t):t.key===i),arrow:()=>c.arrow,enter:()=>c.enter,esc:()=>c.esc,tab:()=>c.tab,space:()=>c.space,delete:()=>c.delete,digit:()=>c.digit,letter:()=>c.letter,char:()=>c.char},c={ctrl:e=>e.ctrlKey||e.key==="Control"||e.key==="Ctrl",shift:e=>e.shiftKey||e.key==="Shift",alt:e=>e.altKey||e.key==="Alt",meta:e=>e.metaKey||e.key==="Meta"||e.key==="Command",arrow:e=>e.key.startsWith("Arrow"),enter:e=>e.key==="Enter",esc:e=>e.key.startsWith("Esc"),tab:e=>e.key==="Tab",space:e=>e.key==="\xA0"||e.key==="Space"||e.key===" ",delete:e=>e.key==="Delete"||e.key==="Backspace",digit:e=>/^\d$/.test(e.key),letter:e=>/^\p{L}$/gu.test(e.key),char:e=>/^\S$/.test(e.key)},K=(e,r,t)=>{t==null||t===!1?e.removeAttribute(r):e.setAttribute(r,t===!0?"":typeof t=="number"||typeof t=="string"?t:"")},fe=(e,r)=>{let t,i,s=a=>{t=!0,setTimeout(()=>{if(t=!1,i)return i=!1,s(a),e(a)},r)};return a=>t?i=!0:(s(a),e(a))},de=(e,r)=>{let t;return i=>{clearTimeout(t),t=setTimeout(()=>{t=null,e(i)},r)}},Q=e=>e.replace(/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,(r,t)=>(t?"-":"")+r.toLowerCase())}}),We=p({"directive/value.js"(){m(),U(),b(),d.value=(e,[r,t],i)=>{const s=e.type==="text"||e.type===""?n=>e.setAttribute("value",e.value=n??""):e.tagName==="TEXTAREA"||e.type==="text"||e.type===""?(n,o,u)=>(o=e.selectionStart,u=e.selectionEnd,e.setAttribute("value",e.value=n??""),o&&e.setSelectionRange(o,u)):e.type==="checkbox"?n=>(e.checked=n,K(e,"checked",n)):e.type==="select-one"?n=>{for(let o in e.options)o.removeAttribute("selected");e.value=n,e.selectedOptions[0]?.setAttribute("selected","")}:n=>e.value=n,a=e.type==="checkbox"?n=>t(i,e.checked):n=>t(i,e.value);return e.addEventListener("input",a),e.addEventListener("change",a),y(()=>s(r(i)))},d.value.parse=e=>{let r=[L(e)];try{r.push(L(`${e}=arguments[1];`))}catch{}return r}}}),$e=p({"directive/fx.js"(){m(),b(),d.fx=(e,r,t)=>y(()=>r(t))}}),pe={};te(pe,{default:()=>he});var he,Ce=p({"sprae.js"(){m(),Oe(),ke(),Ae(),Se(),Ne(),ue(),Pe(),Ee(),Te(),We(),$e(),U(),x.use(se),x.use({compile:e=>x.constructor(`with (arguments[0]) { return ${e} };`)}),he=x}}),Je={},Le=p({"directive/data.js"(){m(),b(),d.data=(e,r,t)=>y(()=>{let i=r(t);for(let s in i)e.dataset[s]=i[s]})}}),Re={},De=p({"directive/aria.js"(){m(),U(),b(),d.aria=(e,r,t)=>{const i=s=>{for(let a in s)K(e,"aria-"+Q(a),s[a]==null?null:s[a]+"")};return y(()=>i(r(t)))}}}),{default:ye}=(Ce(),je(pe));Le(),De(),ue(),g.exports=ye;var me=document.currentScript?.getAttribute("init")||null;if(me&&ye(document.documentElement,JSON.parse(me)),typeof g.exports=="object"&&typeof $=="object"){var Ke=(e,r,t,i)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of Object.getOwnPropertyNames(r))!Object.prototype.hasOwnProperty.call(e,s)&&s!==t&&Object.defineProperty(e,s,{get:()=>r[s],enumerable:!(i=Object.getOwnPropertyDescriptor(r,s))||i.enumerable});return e};g.exports=Ke(g.exports,$)}return g.exports});
