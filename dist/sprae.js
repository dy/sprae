var J=Symbol.dispose||(Symbol.dispose=Symbol("dispose")),f=Symbol("state"),B=Symbol("on"),M=Symbol("off"),z=Symbol("add"),T=":",W,K,G,H=e=>e(),I=H,V={},oe={},ne=(e=document.body,t)=>{if(e[f])return Object.assign(e[f],t);t=Z(t||{});let r=[],o=[],n,s=()=>!o&&(o=r.map(c=>c())),i=()=>(o?.map(c=>c()),o=null);e[B]=s,e[M]=i,e[J]||(e[J]=()=>(e[M](),e[M]=e[B]=e[J]=e[f]=e[z]=null));let a=(c,d=c.attributes)=>{if(d)for(let m=0;m<d.length;){let{name:l,value:u}=d[m];if(l.startsWith(T)){if(c.removeAttribute(l),r.push(n=Ce(c,l,u,t)),o.push(n()),f in c)return}else m++}for(let m of[...c.childNodes])m.nodeType==1&&a(m)};return e[z]=a,a(e),e[f]===void 0&&(e[f]=t),t},Ce=(e,t,r,o)=>{let n,s,i=t.slice(T.length).split("..").map((a,c,{length:d})=>a.split(T).reduce((m,l)=>{let[u,...g]=l.split("."),F=u.startsWith("on")&&(u=u.slice(2),!0)||e["on"+u],w=ae(u,r,V[u]?.clean);if(F){let q=$=>p(w(o),$),D=re(Object.assign(d==1?q:$=>(n=(c?n:q)($),s(),s=i[(c+1)%d]()),{target:e,type:u}),g);return $=>($=m?.(),D.target.addEventListener(u,D,D),()=>($?.(),D.target.removeEventListener(u,D)))}let y=(V[u]||V["*"])(e,o,r,u);if(!g.length&&!m)return()=>y&&K(()=>y(w(o)));let P,b=W(-1),L=-1,te=j(re(()=>{++b.value||(P=K(()=>y&&(b.value==L?te():(L=b.value,y(w(o))))))},g));return q=>(q=m?.(),te(),{[u]:()=>(q?.(),P(),b.value=-1,L=P=null)}[u])},null));return()=>s=i[0]()},ie=e=>(e.directive&&(V=e.directive),e.modifier&&(oe=e.modifier),e.compile&&(se=e.compile),e.prefix&&(T=e.prefix),e.signal&&(W=e.signal),e.effect&&(K=e.effect),e.computed&&(G=e.computed),e.batch&&(H=e.batch),e.untracked&&(I=e.untracked)),We=(e=document.body,t)=>{let r=Z(t);return ne(e,r),new MutationObserver(n=>{for(let s of n)for(let i of s.addedNodes)if(i.nodeType===1&&i[f]===void 0){for(let a of i.attributes)if(a.name.startsWith(T)){e[z](i);break}}}).observe(e,{childList:!0,subtree:!0}),r},se,ae=(e,t,r=R,o)=>{if(o=C[t=r(t)])return o;try{o=se(t)}catch(n){console.error(`\u2234 ${n}

${T+e}="${t}"`)}return C[t]=n=>{try{return o?.(n)}catch(s){console.error(`\u2234 ${s}

${T+e}="${t}"`)}}},C={},R=e=>e.trim(),re=(e,t)=>{for(;t.length;){let[r,...o]=t.pop().split("-");e=Ee(oe[r]?.(e,...o)??e,e)}return e},Ee=(e,t)=>{if(e!=t)for(let r in t)e[r]??(e[r]=t[r]);return e},X=(e,t,r=ae(e,`${t}=__`))=>(o,n)=>{o.__=n,r(o),delete o.__},A=e=>{if(!e.nodeType)return e;let t=e.content.cloneNode(!0),r=[...e.attributes],o=document.createTextNode(""),n=(t.append(o),[...t.childNodes]);return{childNodes:n,content:t,remove:()=>t.append(...n),replaceWith(s){s!==o&&(o.before(s),t.append(...n))},attributes:r,removeAttribute(s){r.splice(r.findIndex(i=>i.name===s),1)}}},p=(e,t)=>typeof e=="function"?e(t):e,ce=e=>e.replace(/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,(t,r)=>(r?"-":"")+t.toLowerCase()),x=(e,t,r)=>r==null||r===!1?e.removeAttribute(t):e.setAttribute(t,r===!0?"":r),Q=(e,t=[])=>e?typeof e=="string"?e:(Array.isArray(e)?e.map(Q):Object.entries(e).reduce((r,[o,n])=>n?[...r,o]:r,[])).join(" "):"",j=(e,t=queueMicrotask)=>{let r=0,o=n=>{r++||(e(n),t((s=r>1)=>(r=0,s&&o(n))))};return o},h=ne;var Pe=["push","pop","shift","unshift","splice"],k=Symbol("signals"),S=Symbol("change"),U=Symbol("set"),O=(e,t=globalThis)=>{if(!e||e[Symbol.toStringTag]||e[k])return e;if(e.constructor!==Object)return Array.isArray(e)?Le(e):e;let r=Object.keys(e).length,o={},n=new Proxy(ue(o,r),{get:(i,a)=>a in o?o[a]?o[a].valueOf():o[a]:t[a],set:(i,a,c,d)=>(a in o?le(o,a,c):(v(o,a,c),o[S].value=++r),1),deleteProperty:(i,a)=>(a in o&&(a[0]!="_"&&o[a]?.[Symbol.dispose]?.(),delete o[a],o[S].value=--r),1),ownKeys:()=>(o[S].value,Reflect.ownKeys(o)),has:i=>1}),s=Object.getOwnPropertyDescriptors(e);for(let i in e)s[i]?.get?(o[i]=G(s[i].get.bind(n)))[U]=s[i].set?.bind(n):v(o,i,e[i]);return n},Le=(e,t=globalThis)=>{let r,o=Array(e.length).fill(null),n=new Proxy(ue(o,o.length),{get(s,i){return i==="length"?Pe.includes(r)?o.length:o[S].value:(r=i,o[i]?o[i].valueOf():i in o?(o[i]=W(O(e[i]))).valueOf():t[i])},set(s,i,a){if(i==="length"){for(let c=a;c<o.length;c++)delete n[c];o[S].value=o.length=a}else i>=o.length?(v(o,i,a),n.length=+i+1):o[i]?le(o,i,a):v(o,i,a);return 1},deleteProperty:(s,i)=>(o[i]?.[Symbol.dispose]?.(),delete o[i],1)});return n},v=(e,t,r)=>e[t]=t[0]=="_"||r?.peek?r:W(O(r)),le=(e,t,r,o,n)=>t[0]==="_"?e[t]=r:r!==(n=(o=e[t]).peek())&&(o[U]?o[U](r):Array.isArray(r)&&Array.isArray(n)?S in n?I(()=>H(()=>{for(let s=0;s<r.length;s++)n[s]=r[s];n.length=r.length})):o.value=r:o.value=O(r)),ue=(e,t)=>Object.assign(e,{[S]:W(t),[k]:e}),Z=O;var N,fe=0,E,Y=(e,t,r=new Set,o=()=>t.value)=>t={get value(){return N?.deps.push(r.add(N)),e},set value(n){if(n!==e){e=n;for(let s of r)E?E.add(s):s()}},peek(){return e},toJSON:o,then:o,toString:o,valueOf:o},_=(e,t,r,o,n)=>(r=s=>{if(n=t,t=null,n?.call?.(),s=N,N=r,fe++>10)throw"Cycle detected";try{t=e()}finally{N=s,fe--}},o=r.deps=[],r(),s=>{for(t?.call?.();s=o.pop();)s.delete(r)}),pe=(e,t=Y(),r,o,n=()=>r.value)=>r={get value(){return o||(o=_(()=>t.value=e())),t.value},peek:t.peek,toJSON:n,then:n,toString:n,valueOf:n},de=(e,t=!E)=>{E??(E=new Set);try{e()}finally{if(t){for(let r of E)r();E=null}}},me=(e,t,r)=>(t=N,N=null,r=e(),N=t,r);var ye=(e,t,r,o,n)=>{var s;return e._holder?h(o=e,t):(e[s=f]??(e[s]=null),o=e.content?A(e):e,e.replaceWith(r=document.createTextNode("")),o._holder=r._holder=r,r._clauses=[o._clause=[o,!1]],r.update=j(()=>{let i=r._clauses.find(([,a])=>a);i!=n&&(n?.[0].remove(),n?.[0][M]?.(),(n=i)&&(r.before(n[0].content||n[0]),n[0][f]?n[0][B]?.():(delete n[0][f],h(n[0],t))))})),i=>{o._clause[1]=i,o._holder.update()}};var he=(e,t,r)=>(r=e.content?A(e):e,r._holder=e.previousSibling?._holder||e.previousSibling?.previousSibling?._holder,e.remove(),e[f]=null,r._holder._clauses.push(r._clause=[r,!0]),()=>{r._holder.update()});var ge=e=>(e.content&&e.replaceWith(e=A(e).childNodes[0]),t=>(t=p(t,e.textContent),e.textContent=t??""));var be=(e,t,r)=>(t=new Set,o=>{r=new Set,o&&Q(p(o,e.className)).split(" ").map(n=>n&&r.add(n));for(let n of t)r.has(n)?r.delete(n):e.classList.remove(n);for(let n of t=r)e.classList.add(n)});var xe=(e,t)=>(t=e.getAttribute("style"),r=>{if(r=p(r,e.style),typeof r=="string")x(e,"style",t+"; "+r);else{t&&x(e,"style",t);for(let o in r)o[0]=="-"?e.style.setProperty(o,r[o]):o[0]>"A"&&(e.style[o]=r[o])}});var Se=()=>e=>p(e);var Ae=(e,t,r,o)=>{try{let n=X(o,r),s=e.type==="checkbox"?()=>n(t,e.checked):e.type==="select-multiple"?()=>n(t,[...e.selectedOptions].map(i=>i.value)):()=>n(t,e.selectedIndex<0?null:e.value);e.oninput=e.onchange=s,e.type?.startsWith("select")&&(new MutationObserver(s).observe(e,{childList:!0,subtree:!0,attributes:!0}),h(e,t)),C[R(r)](t)??s()}catch{}return e.type==="text"||e.type===""?n=>e.setAttribute("value",e.value=n??""):e.tagName==="TEXTAREA"||e.type==="text"||e.type===""?(n,s,i)=>(s=e.selectionStart,i=e.selectionEnd,e.setAttribute("value",e.value=n??""),s&&e.setSelectionRange(s,i)):e.type==="checkbox"?n=>(e.checked=n,x(e,"checked",n)):e.type==="radio"?n=>e.value===n&&(e.checked=n,x(e,"checked",n)):e.type==="select-one"?n=>{for(let s of e.options)s.value==n?s.setAttribute("selected",""):s.removeAttribute("selected");e.value=n}:e.type==="select-multiple"?n=>{for(let s of e.options)s.removeAttribute("selected");for(let s of n)e.querySelector(`[value="${s}"]`).setAttribute("selected","")}:n=>e.value=n};var ke=(e,t,r,o,n,s)=>typeof C[R(r)](t)=="function"?i=>i(e):X(o,r)(t,e);var Oe=(e,t,r)=>(e[f]=null,r=O({},t),o=>(Object.assign(r,p(o,r)),e[f]??(delete e[f],I(()=>h(e,r)))));var Ne=(e,t,r)=>{let[o,n="$"]=r.split(/\bin\b/)[0].trim().replace(/\(|\)/g,"").split(/\s*,\s*/),s=document.createTextNode(""),i,a,c,d=0,m=j(()=>{var F,w;let l=0,u=c,g=u.length;if(i&&!i[S]){for(let y of i[k]||[])y[Symbol.dispose]();i=null,d=0}if(g<d)i.length=g;else{if(!i)i=u;else for(;l<d;)i[l]=u[l++];for(;l<g;l++){i[l]=u[l];let y=l,P=O({[o]:i[k]?.[y]?.peek?i[k]?.[y]:i[y],[n]:a?a[y]:y},t),b=e.content?A(e):e.cloneNode(!0);s.before(b.content||b),h(b,P);let L=((w=i[F=k]||(i[F]=[]))[l]||(w[l]={}))[Symbol.dispose];i[k][l][Symbol.dispose]=()=>{L?.(),b[Symbol.dispose]?.(),b.remove()}}}d=g});return e.replaceWith(s),e[f]=null,l=>(a=null,typeof l=="number"?c=Array.from({length:l},(u,g)=>g+1):l?.constructor===Object?(a=Object.keys(l),c=Object.values(l)):c=l||[],K(()=>{c[S]?.value,m()}))};Ne.clean=e=>e.split(/\bin\b/)[1].trim();var Te=Ne;var je=(e,t,r,o)=>n=>x(e,o,p(n,e.getAttribute(o)));var we=e=>t=>{for(let r in t)x(e,ce(r),t[r])};var qe={"*":je,"":we,class:be,text:ge,style:xe,fx:Se,value:Ae,ref:ke,scope:Oe,if:ye,else:he,each:Te},$e={debounce:(e,t=250,r=t==="tick"?queueMicrotask:t==="raf"?requestAnimationFrame:t==="idle"?requestIdleCallback:n=>setTimeout(n,t),o=0)=>(n,s=++o)=>r(()=>s==o&&e(n)),throttle:(e,t=250,r=t==="tick"?queueMicrotask:t==="raf"?requestAnimationFrame:o=>setTimeout(o,t))=>j(e,r),once:(e,t,r)=>Object.assign(o=>!t&&(t=1,e(o)),{once:!0}),prevent:e=>t=>(t?.preventDefault(),e(t)),stop:e=>t=>(t?.stopPropagation(),e(t)),immediate:e=>t=>(t?.stopImmediatePropagation(),e(t)),passive:e=>(e.passive=!0,e),capture:e=>(e.capture=!0,e),window:e=>(e.target=window,e),document:e=>(e.target=document,e),parent:e=>(e.target=e.target.parentNode,e),self:e=>t=>t.target===e.target&&e(t),outside:e=>(t,r)=>(r=e.target,!r.contains(t.target)&&t.target.isConnected&&(r.offsetWidth||r.offsetHeight))},ee={ctrl:e=>e.ctrlKey||e.key==="Control"||e.key==="Ctrl",shift:e=>e.shiftKey||e.key==="Shift",alt:e=>e.altKey||e.key==="Alt",meta:e=>e.metaKey||e.key==="Meta"||e.key==="Command",arrow:e=>e.key.startsWith("Arrow"),enter:e=>e.key==="Enter",esc:e=>e.key.startsWith("Esc"),tab:e=>e.key==="Tab",space:e=>e.key==="\xA0"||e.key==="Space"||e.key===" ",delete:e=>e.key==="Delete"||e.key==="Backspace",digit:e=>/^\d$/.test(e.key),letter:e=>/^\p{L}$/gu.test(e.key),char:e=>/^\S$/.test(e.key)};for(let e in ee)$e[e]=(t,...r)=>o=>ee[e](o)&&r.every(n=>ee[n]?.(o)??o.key===n)&&t(o);ie({directive:qe,modifier:$e,compile:e=>h.constructor(`with (arguments[0]) { return ${e} };`),signal:Y,effect:_,computed:pe,batch:de,untracked:me});var It=h;export{de as batch,pe as computed,It as default,_ as effect,Y as signal,h as sprae,We as start,Z as store,me as untracked,ie as use};
