var B=Symbol.dispose||(Symbol.dispose=Symbol("dispose")),l=Symbol("state"),X=Symbol("on"),I=Symbol("off"),Q=Symbol("add"),C=":",O,R,Y,Z=e=>e(),V=Z,M={},F={},U=null,se=(e=document.body,r)=>{if(e[l])return Object.assign(e[l],r);r=J(r||{});let t=[],o=[],n,i=()=>!o&&(o=t.map(c=>c())),s=()=>(o?.map(c=>c()),o=null);e[X]=i,e[I]=s,e[B]||(e[B]=()=>(e[I](),e[I]=e[X]=e[B]=e[l]=e[Q]=null));let a=(c,f=c.attributes)=>{if(f)for(let d=0;d<f.length;){let{name:u,value:y}=f[d];if(u.startsWith(C)){if(c.removeAttribute(u),(n=Ce(c,u,y,r))&&(t.push(n),o.push(n())),l in c)return}else d++}for(let d of[...c.childNodes])d.nodeType==1&&a(d)};return e[Q]=a,a(e),e[l]===void 0&&(e[l]=r),r},Ce=(e,r,t,o)=>{let n,i,s=r.slice(C.length).split("..").map((a,c,{length:f})=>a.split(C).reduce((d,u)=>{let[y,...h]=u.split("."),T=A(t,M[U=y]?.parse);if(y.startsWith("on")){let L=y.slice(2),K=ie(H(f==1?E=>T(o,G=>m(G,E)):E=>(n=(c?n:G=>m(T(o),G))(E),i(),i=s[(c+1)%f]()),{target:e}),h);return E=>(E=d?.(),K.target.addEventListener(L,K,K),()=>(E?.(),K.target.removeEventListener(L,K)))}let w,g,j,b;h.length?(j=O(-1),b=-1,w=ie(H(D(()=>{++j.value||(g=R(()=>P&&(j.value==b?w():(b=j.value,T(o,P)))))}),{target:e}),h)):w=H(()=>g=R(()=>T(o,P)),{target:e});let P=(M[y]||M["*"])(w.target,o,t,y);if(P)return e[l]&&(o=e[l]),L=>(L=d?.(),w(),()=>(L?.(),g?.(),j&&(j.value=-1,b=g=null)))},null));return()=>i=s[0]?.()},_=e=>(e.compile&&(ce=e.compile),e.prefix&&(C=e.prefix),e.signal&&(O=e.signal),e.effect&&(R=e.effect),e.computed&&(Y=e.computed),e.batch&&(Z=e.batch),e.untracked&&(V=e.untracked)),ae=(e=document.body,r)=>{let t=J(r);return se(e,t),new MutationObserver(n=>{for(let i of n)for(let s of i.addedNodes)if(s.nodeType===1&&s[l]===void 0){for(let a of s.attributes)if(a.name.startsWith(C)){e[Q](s);break}}}).observe(e,{childList:!0,subtree:!0}),t},ce,A=(e,r,t)=>{if(t=A.cache[e])return t;let o=e.trim()||"undefined";r&&(o=r(o)),/^(if|let|const)\b/.test(o)||/;(?![^{]*})/.test(o)||(o=`return ${o}`),/\bawait\s/.test(o)&&(o=`return (async()=>{ ${o} })()`);try{t=ce(o),Object.defineProperty(t,"name",{value:`\u2234 ${e}`})}catch(n){console.error(`\u2234 ${n}

${C+U}="${e}"`)}return A.cache[e]=(n,i,s)=>{try{let a=t?.(n);return i?(a?.then?a.then(c=>s=i(c)):s=i(a),()=>m(s)):a}catch(a){console.error(`\u2234 ${a}

${C+U}="${e}"`)}}};A.cache={};var ie=(e,r)=>{for(;r.length;){let[t,...o]=r.pop().split("-");e=H(F[t]?.(e,...o)??e,e)}return e},H=(e,r)=>{if(e!=r)for(let t in r)e[t]??(e[t]=r[t]);return e},N=e=>{if(!e.nodeType)return e;let r=e.content.cloneNode(!0),t=[...e.attributes],o=document.createTextNode(""),n=(r.append(o),[...r.childNodes]);return{childNodes:n,content:r,remove:()=>r.append(...n),replaceWith(i){i!==o&&(o.before(i),r.append(...n))},attributes:t,removeAttribute(i){t.splice(t.findIndex(s=>s.name===i),1)}}},m=(e,r)=>typeof e=="function"?e(r):e,ue=e=>e.replace(/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,(r,t)=>(t?"-":"")+r.toLowerCase()),x=(e,r,t)=>t==null||t===!1?e.removeAttribute(r):e.setAttribute(r,t===!0?"":t),v=(e,r=[])=>e?typeof e=="string"?e:(Array.isArray(e)?e.map(v):Object.entries(e).reduce((t,[o,n])=>n?[...t,o]:t,[])).join(" "):"",D=(e,r=queueMicrotask)=>{let t=0,o=n=>{t++||(e(n),r((i=t>1)=>(t=0,i&&o(n))))};return o},le=(e,r=queueMicrotask,t=0)=>(o,n=++t)=>r(()=>n==t&&e(o)),p=se;var S=Symbol("signals"),k=Symbol("change"),te=Symbol("set"),ee=!0,W=(e,r)=>{if(!e||e[Symbol.toStringTag]||e[S])return e;if(e.constructor!==Object)return Array.isArray(e)?De(e):e;let t=Object.keys(e).length,o={},n=new Proxy(Object.assign(o,{[k]:O(t),[S]:o}),{get:(s,a)=>a in o?o[a]?o[a].valueOf():o[a]:r?r[a]:globalThis[a],set:(s,a,c,f)=>a in o?(fe(o,a,c),1):(ee=!1,r&&a in r?r[a]=c:(z(o,a,c),o[k].value=++t),ee=!0,1),deleteProperty:(s,a)=>(a in o&&(a[0]!="_"&&o[a]?.[Symbol.dispose]?.(),delete o[a],o[k].value=--t),1),ownKeys:()=>(o[k].value,Reflect.ownKeys(o)),has:(s,a)=>a in o?!0:r?a in r:ee}),i=Object.getOwnPropertyDescriptors(e);for(let s in e)i[s]?.get?(o[s]=Y(i[s].get.bind(n)))[te]=i[s].set?.bind(n):z(o,s,e[s]);return n},De=(e,r=globalThis)=>{let t=Array(e.length).fill(null),o=!1,n=a=>function(){return o=!0,a.apply(this,arguments)},i=O(e.length),s=new Proxy(Object.assign(t,{[k]:i,[S]:t,push:n(t.push),pop:n(t.pop),shift:n(t.shift),unshift:n(t.unshift),splice:n(t.splice)}),{get(a,c){return c==="length"?o?(o=!1,t.length):i.value:typeof c=="symbol"||isNaN(c)?t[c]?.valueOf()??r[c]:(t[c]??(t[c]=O(W(e[c])))).valueOf()},set(a,c,f){if(c==="length"){for(let d=f;d<t.length;d++)delete s[d];i.value=t.length=f}else c>=t.length?(z(t,c,f),s.length=+c+1):t[c]?fe(t,c,f):z(t,c,f);return 1},deleteProperty:(a,c)=>(t[c]?.[Symbol.dispose]?.(),delete t[c],1)});return s},z=(e,r,t)=>e[r]=r[0]=="_"||t?.peek?t:O(W(t)),fe=(e,r,t,o,n)=>r[0]==="_"?e[r]=t:t!==(n=(o=e[r]).peek())&&(o[te]?o[te](t):Array.isArray(t)&&Array.isArray(n)?k in n?V(()=>Z(()=>{for(let i=0;i<t.length;i++)n[i]=t[i];n.length=t.length})):o.value=t:o.value=W(t)),J=W;var $,pe=0,q,re=(e,r,t=new Set,o=()=>r.value)=>r={get value(){return $?.deps.push(t.add($)),e},set value(n){if(n!==e){e=n;for(let i of t)q?q.add(i):i()}},peek(){return e},toJSON:o,then:o,toString:o,valueOf:o},oe=(e,r,t,o,n)=>(t=i=>{if(n=r,r=null,n?.call?.(),i=$,$=t,pe++>10)throw"Cycle detected";try{r=e()}finally{$=i,pe--}},o=t.deps=[],t(),i=>{for(r?.call?.();i=o.pop();)i.delete(t)}),de=(e,r=re(),t,o,n=()=>t.value)=>t={get value(){return o||(o=oe(()=>r.value=e())),r.value},peek:r.peek,toJSON:n,then:n,toString:n,valueOf:n},me=(e,r=!q)=>{q??(q=new Set);try{e()}finally{if(r){for(let t of q)t();q=null}}},ye=(e,r,t)=>(r=$,$=null,t=e(),$=r,t);var he=(e,r,t,o,n)=>{var i;return e._holder?p(o=e,r):(e[i=l]??(e[i]=null),o=e.content?N(e):e,e.replaceWith(t=document.createTextNode("")),o._holder=t._holder=t,t._clauses=[o._clause=[o,!1]],t.update=D(()=>{let s=t._clauses.find(([,a])=>a);s!=n&&(n?.[0].remove(),n?.[0][I]?.(),(n=s)&&(t.before(n[0].content||n[0]),n[0][l]?n[0][X]?.():(delete n[0][l],p(n[0],r))))})),s=>{o._clause[1]=s,o._holder.update()}};var ge=(e,r,t,o,n=e)=>{for(t=e.content?N(e):e;n&&!(t._holder=n._holder);)n=n.previousSibling;return e.remove(),e[l]=null,t._holder._clauses.push(t._clause=[t,!0]),t._holder.update};var be=e=>(e.content&&e.replaceWith(e=N(e).childNodes[0]),r=>(r=m(r,e.textContent),e.textContent=r??""));var xe=(e,r,t)=>(r=new Set,o=>{t=new Set,o&&v(m(o,e.className)).split(" ").map(n=>n&&t.add(n));for(let n of r)t.has(n)?t.delete(n):e.classList.remove(n);for(let n of r=t)e.classList.add(n)});var Se=(e,r)=>(r=e.getAttribute("style"),t=>{if(t=m(t,e.style),typeof t=="string")x(e,"style",r+"; "+t);else{r&&x(e,"style",r);for(let o in t)o[0]=="-"?e.style.setProperty(o,t[o]):o[0]>"A"&&(e.style[o]=t[o])}});var Ae=()=>m;var We=(e,r=A(`${e}=__`))=>(t,o)=>{t.__=o,r(t),delete t.__},Oe=(e,r,t,o)=>{try{let n=We(t),i=e.type==="checkbox"?()=>n(r,e.checked):e.type==="select-multiple"?()=>n(r,[...e.selectedOptions].map(s=>s.value)):()=>n(r,e.selectedIndex<0?null:e.value);e.oninput=e.onchange=i,e.type?.startsWith("select")&&(new MutationObserver(i).observe(e,{childList:!0,subtree:!0,attributes:!0}),p(e,r)),A(t)(r)??i()}catch{}return e.type==="text"||e.type===""?n=>e.setAttribute("value",e.value=n??""):e.tagName==="TEXTAREA"||e.type==="text"||e.type===""?(n,i,s)=>(i=e.selectionStart,s=e.selectionEnd,e.setAttribute("value",e.value=n??""),i&&e.setSelectionRange(i,s)):e.type==="checkbox"?n=>(e.checked=n,x(e,"checked",n)):e.type==="radio"?n=>e.value===n&&(e.checked=n,x(e,"checked",n)):e.type==="select-one"?n=>{for(let i of e.options)i.value==n?i.setAttribute("selected",""):i.removeAttribute("selected");e.value=n}:e.type==="select-multiple"?n=>{for(let i of e.options)i.removeAttribute("selected");for(let i of n)e.querySelector(`[value="${i}"]`).setAttribute("selected","")}:n=>e.value=n};var ke=(e,r,t,o,n,i)=>{if(typeof A(t)(r)=="function")return s=>s(e);Object.defineProperty(r,t,{value:e,configurable:!0})};var we=(e,r)=>{let t=e[l]=W({},r),o=!1;return n=>{if(n=m(n,t),n!==t)for(let i in n){let s=typeof n[i]=="function"?n[i].bind(t):n[i];i in t[S]?t[i]=s:t[S][i]=i[0]=="_"||s?.peek?s:O(W(s))}return!o&&(o=!0,delete e[l],V(()=>p(e,t)))}};var je=(e,r,t)=>{let[o,n="$"]=t.split(/\bin\b/)[0].trim().replace(/\(|\)/g,"").split(/\s*,\s*/),i=document.createTextNode(""),s,a,c,f=0,d=D(()=>{var T,w;let u=0,y=c,h=y.length;if(s&&!s[k]){for(let g of s[S]||[])g[Symbol.dispose]();s=null,f=0}if(h<f)s.length=h;else{if(!s)s=y;else for(;u<f;)s[u]=y[u++];for(;u<h;u++){s[u]=y[u];let g=u,j=Object.create(r,{[o]:{get:()=>s[g]},[n]:{value:a?a[g]:g}}),b=e.content?N(e):e.cloneNode(!0);i.before(b.content||b),p(b,j);let P=((w=s[T=S]||(s[T]=[]))[u]||(w[u]={}))[Symbol.dispose];s[S][u][Symbol.dispose]=()=>{P?.(),b[Symbol.dispose]?.(),b.remove()}}}f=h});return e.replaceWith(i),e[l]=null,u=>(a=null,typeof u=="number"?c=Array.from({length:u},(y,h)=>h+1):u?.constructor===Object?(a=Object.keys(u),c=Object.values(u)):c=u||[],R(()=>{c[k]?.value,d()}))};je.parse=e=>e.split(/\bin\b/)[1].trim();var Ne=je;var $e=(e,r,t,o)=>n=>x(e,o,m(n,e.getAttribute(o)));var Te=e=>r=>{for(let t in r)x(e,ue(t),r[t])};Object.assign(M,{"*":$e,"":Te,class:xe,text:be,style:Se,fx:Ae,value:Oe,ref:ke,scope:we,if:he,else:ge,each:Ne});Object.assign(F,{debounce:(e,r=250,t=r==="tick"?queueMicrotask:r==="raf"?requestAnimationFrame:r==="idle"?requestIdleCallback:n=>setTimeout(n,r),o=0)=>le(e,t),throttle:(e,r=250,t=r==="tick"?queueMicrotask:r==="raf"?requestAnimationFrame:o=>setTimeout(o,r))=>D(e,t),once:(e,r,t)=>Object.assign(o=>!r&&(r=1,e(o)),{once:!0}),prevent:e=>r=>(r?.preventDefault(),e(r)),stop:e=>r=>(r?.stopPropagation(),e(r)),immediate:e=>r=>(r?.stopImmediatePropagation(),e(r)),passive:e=>(e.passive=!0,e),capture:e=>(e.capture=!0,e),window:e=>(e.target=e.target.ownerDocument.defaultView,e),document:e=>(e.target=e.target.ownerDocument,e),root:e=>(e.target=e.target.ownerDocument.documentElement,e),body:e=>(e.target=e.target.ownerDocument.body,e),parent:e=>(e.target=e.target.parentNode,e),self:e=>r=>r.target===e.target&&e(r),outside:e=>(r,t)=>(t=e.target,!t.contains(r.target)&&r.target.isConnected&&(t.offsetWidth||t.offsetHeight))});var ne={ctrl:e=>e.ctrlKey||e.key==="Control"||e.key==="Ctrl",shift:e=>e.shiftKey||e.key==="Shift",alt:e=>e.altKey||e.key==="Alt",meta:e=>e.metaKey||e.key==="Meta"||e.key==="Command",arrow:e=>e.key.startsWith("Arrow"),enter:e=>e.key==="Enter",esc:e=>e.key.startsWith("Esc"),tab:e=>e.key==="Tab",space:e=>e.key==="\xA0"||e.key==="Space"||e.key===" ",delete:e=>e.key==="Delete"||e.key==="Backspace",digit:e=>/^\d$/.test(e.key),letter:e=>/^\p{L}$/gu.test(e.key),char:e=>/^\S$/.test(e.key)};for(let e in ne)F[e]=(r,...t)=>o=>ne[e](o)&&t.every(n=>ne[n]?.(o)??o.key===n)&&r(o);_({compile:e=>p.constructor(`with (arguments[0]) { ${e} }`),signal:re,effect:oe,computed:de,batch:me,untracked:ye});p.use=_;p.store=J;p.directive=M;p.modifier=F;p.start=ae;var qt=p;export{me as batch,de as computed,qt as default,oe as effect,re as signal,p as sprae,ae as start,J as store,ye as untracked,_ as use};
