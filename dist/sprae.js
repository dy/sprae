var J=Symbol.dispose||(Symbol.dispose=Symbol("dispose")),u=Symbol("state"),B=Symbol("on"),M=Symbol("off"),z=Symbol("add"),T=":",L,K,G,H=e=>e(),I=H,V={},oe={},ne=(e=document.body,t)=>{if(e[u])return Object.assign(e[u],t);t=Z(t||{});let r=[],o=[],n,s=()=>!o&&(o=r.map(l=>l())),i=()=>(o?.map(l=>l()),o=null);e[B]=s,e[M]=i,e[J]||(e[J]=()=>(e[M](),e[M]=e[B]=e[J]=e[u]=e[z]=null));let a=(l,d=l.attributes)=>{if(d)for(let m=0;m<d.length;){let{name:c,value:f}=d[m];if(c.startsWith(T)){if(l.removeAttribute(c),r.push(n=Ce(l,c,f,t)),o.push(n()),u in l)return}else m++}for(let m of[...l.childNodes])m.nodeType==1&&a(m)};return e[z]=a,a(e),e[u]===void 0&&(e[u]=t),t},Ce=(e,t,r,o)=>{let n,s,i=t.slice(T.length).split("..").map((a,l,{length:d})=>a.split(T).reduce((m,c)=>{let[f,...g]=c.split("."),$=ae(f,r,V[f]?.clean);if(f.startsWith("on")){let W=f.slice(2),te=P=>p($(o),P),D=re(Object.assign(d==1?te:P=>(n=(l?n:te)(P),s(),s=i[(l+1)%d]()),{target:e,type:W}),g);return P=>(P=m?.(),D.target.addEventListener(W,D,D),()=>(P?.(),D.target.removeEventListener(W,D)))}let N=(V[f]||V["*"])(e,o,r,f);if(!g.length&&!m)return()=>N&&K(()=>N($(o)));let h,C=L(-1),S=-1,F=j(re(()=>{++C.value||(h=K(()=>N&&(C.value==S?F():(S=C.value,N($(o))))))},g));return W=>(W=m?.(),F(),{[f]:()=>(W?.(),h(),C.value=-1,S=h=null)}[f])},null));return()=>s=i[0]()},ie=e=>(e.directive&&(V=e.directive),e.modifier&&(oe=e.modifier),e.compile&&(se=e.compile),e.prefix&&(T=e.prefix),e.signal&&(L=e.signal),e.effect&&(K=e.effect),e.computed&&(G=e.computed),e.batch&&(H=e.batch),e.untracked&&(I=e.untracked)),We=(e=document.body,t)=>{let r=Z(t);return ne(e,r),new MutationObserver(n=>{for(let s of n)for(let i of s.addedNodes)if(i.nodeType===1&&i[u]===void 0){for(let a of i.attributes)if(a.name.startsWith(T)){e[z](i);break}}}).observe(e,{childList:!0,subtree:!0}),r},se,ae=(e,t,r=R,o)=>{if(o=E[t=r(t)])return o;try{o=se(t)}catch(n){console.error(`\u2234 ${n}

${T+e}="${t}"`)}return E[t]=n=>{try{return o?.(n)}catch(s){console.error(`\u2234 ${s}

${T+e}="${t}"`)}}},E={},R=e=>e.trim(),re=(e,t)=>{for(;t.length;){let[r,...o]=t.pop().split("-");e=Pe(oe[r]?.(e,...o)??e,e)}return e},Pe=(e,t)=>{if(e!=t)for(let r in t)e[r]??(e[r]=t[r]);return e},X=(e,t,r=ae(e,`${t}=__`))=>(o,n)=>{o.__=n,r(o),delete o.__},A=e=>{if(!e.nodeType)return e;let t=e.content.cloneNode(!0),r=[...e.attributes],o=document.createTextNode(""),n=(t.append(o),[...t.childNodes]);return{childNodes:n,content:t,remove:()=>t.append(...n),replaceWith(s){s!==o&&(o.before(s),t.append(...n))},attributes:r,removeAttribute(s){r.splice(r.findIndex(i=>i.name===s),1)}}},p=(e,t)=>typeof e=="function"?e(t):e,le=e=>e.replace(/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,(t,r)=>(r?"-":"")+t.toLowerCase()),b=(e,t,r)=>r==null||r===!1?e.removeAttribute(t):e.setAttribute(t,r===!0?"":r),Q=(e,t=[])=>e?typeof e=="string"?e:(Array.isArray(e)?e.map(Q):Object.entries(e).reduce((r,[o,n])=>n?[...r,o]:r,[])).join(" "):"",j=(e,t=queueMicrotask)=>{let r=0,o=n=>{r++||(e(n),t((s=r>1)=>(r=0,s&&o(n))))};return o};var y=ne;var Ee=["push","pop","shift","unshift","splice"],k=Symbol("signals"),x=Symbol("change"),U=Symbol("set"),O=(e,t=globalThis)=>{if(!e||e[Symbol.toStringTag]||e[k])return e;if(e.constructor!==Object)return Array.isArray(e)?Le(e):e;let r=Object.keys(e).length,o={},n=new Proxy(ue(o,r),{get:(i,a)=>a in o?o[a]?o[a].valueOf():o[a]:t[a],set:(i,a,l,d)=>(a in o?ce(o,a,l):(v(o,a,l),o[x].value=++r),1),deleteProperty:(i,a)=>(a in o&&(a[0]!="_"&&o[a]?.[Symbol.dispose]?.(),delete o[a],o[x].value=--r),1),ownKeys:()=>(o[x].value,Reflect.ownKeys(o)),has:i=>1}),s=Object.getOwnPropertyDescriptors(e);for(let i in e)s[i]?.get?(o[i]=G(s[i].get.bind(n)))[U]=s[i].set?.bind(n):v(o,i,e[i]);return n},Le=(e,t=globalThis)=>{let r,o=Array(e.length).fill(null),n=new Proxy(ue(o,o.length),{get(s,i){return i==="length"?Ee.includes(r)?o.length:o[x].value:(r=i,o[i]?o[i].valueOf():i in o?(o[i]=L(O(e[i]))).valueOf():t[i])},set(s,i,a){if(i==="length"){for(let l=a;l<o.length;l++)delete n[l];o[x].value=o.length=a}else i>=o.length?(v(o,i,a),n.length=+i+1):o[i]?ce(o,i,a):v(o,i,a);return 1},deleteProperty:(s,i)=>(o[i]?.[Symbol.dispose]?.(),delete o[i],1)});return n},v=(e,t,r)=>e[t]=t[0]=="_"||r?.peek?r:L(O(r)),ce=(e,t,r,o,n)=>t[0]==="_"?e[t]=r:r!==(n=(o=e[t]).peek())&&(o[U]?o[U](r):Array.isArray(r)&&Array.isArray(n)?x in n?I(()=>H(()=>{for(let s=0;s<r.length;s++)n[s]=r[s];n.length=r.length})):o.value=r:o.value=O(r)),ue=(e,t)=>Object.assign(e,{[x]:L(t),[k]:e}),Z=O;var w,fe=0,q,Y=(e,t,r=new Set,o=()=>t.value)=>t={get value(){return w?.deps.push(r.add(w)),e},set value(n){if(n!==e){e=n;for(let s of r)q?q.add(s):s()}},peek(){return e},toJSON:o,then:o,toString:o,valueOf:o},_=(e,t,r,o,n)=>(r=s=>{if(n=t,t=null,n?.call?.(),s=w,w=r,fe++>10)throw"Cycle detected";try{t=e()}finally{w=s,fe--}},o=r.deps=[],r(),s=>{for(t?.call?.();s=o.pop();)s.delete(r)}),pe=(e,t=Y(),r,o,n=()=>r.value)=>r={get value(){return o||(o=_(()=>t.value=e())),t.value},peek:t.peek,toJSON:n,then:n,toString:n,valueOf:n},de=(e,t=!q)=>{q??(q=new Set);try{e()}finally{if(t){for(let r of q)r();q=null}}},me=(e,t,r)=>(t=w,w=null,r=e(),w=t,r);var ye=(e,t,r,o,n)=>{var s;return e._holder?y(o=e,t):(e[s=u]??(e[s]=null),o=e.content?A(e):e,e.replaceWith(r=document.createTextNode("")),o._holder=r._holder=r,r._clauses=[o._clause=[o,!1]],r.update=j(()=>{let i=r._clauses.find(([,a])=>a);i!=n&&(n?.[0].remove(),n?.[0][M]?.(),(n=i)&&(r.before(n[0].content||n[0]),n[0][u]?n[0][B]?.():(delete n[0][u],y(n[0],t))))})),i=>{o._clause[1]=i,o._holder.update()}};var he=(e,t,r,o,n=e)=>{for(r=e.content?A(e):e;n&&!(r._holder=n._holder);)n=n.previousSibling;return e.remove(),e[u]=null,r._holder._clauses.push(r._clause=[r,!0]),()=>{r._holder.update()}};var ge=e=>(e.content&&e.replaceWith(e=A(e).childNodes[0]),t=>(t=p(t,e.textContent),e.textContent=t??""));var be=(e,t,r)=>(t=new Set,o=>{r=new Set,o&&Q(p(o,e.className)).split(" ").map(n=>n&&r.add(n));for(let n of t)r.has(n)?r.delete(n):e.classList.remove(n);for(let n of t=r)e.classList.add(n)});var xe=(e,t)=>(t=e.getAttribute("style"),r=>{if(r=p(r,e.style),typeof r=="string")b(e,"style",t+"; "+r);else{t&&b(e,"style",t);for(let o in r)o[0]=="-"?e.style.setProperty(o,r[o]):o[0]>"A"&&(e.style[o]=r[o])}});var Se=()=>e=>p(e);var Ae=(e,t,r,o)=>{try{let n=X(o,r),s=e.type==="checkbox"?()=>n(t,e.checked):e.type==="select-multiple"?()=>n(t,[...e.selectedOptions].map(i=>i.value)):()=>n(t,e.selectedIndex<0?null:e.value);e.oninput=e.onchange=s,e.type?.startsWith("select")&&(new MutationObserver(s).observe(e,{childList:!0,subtree:!0,attributes:!0}),y(e,t)),E[R(r)](t)??s()}catch{}return e.type==="text"||e.type===""?n=>e.setAttribute("value",e.value=n??""):e.tagName==="TEXTAREA"||e.type==="text"||e.type===""?(n,s,i)=>(s=e.selectionStart,i=e.selectionEnd,e.setAttribute("value",e.value=n??""),s&&e.setSelectionRange(s,i)):e.type==="checkbox"?n=>(e.checked=n,b(e,"checked",n)):e.type==="radio"?n=>e.value===n&&(e.checked=n,b(e,"checked",n)):e.type==="select-one"?n=>{for(let s of e.options)s.value==n?s.setAttribute("selected",""):s.removeAttribute("selected");e.value=n}:e.type==="select-multiple"?n=>{for(let s of e.options)s.removeAttribute("selected");for(let s of n)e.querySelector(`[value="${s}"]`).setAttribute("selected","")}:n=>e.value=n};var ke=(e,t,r,o,n,s)=>typeof E[R(r)](t)=="function"?i=>i(e):X(o,r)(t,e);var Oe=(e,t,r)=>(e[u]=null,r=O({},t),o=>(Object.assign(r,p(o,r)),e[u]??(delete e[u],I(()=>y(e,r)))));var we=(e,t,r)=>{let[o,n="$"]=r.split(/\bin\b/)[0].trim().replace(/\(|\)/g,"").split(/\s*,\s*/),s=document.createTextNode(""),i,a,l,d=0,m=j(()=>{var $,N;let c=0,f=l,g=f.length;if(i&&!i[x]){for(let h of i[k]||[])h[Symbol.dispose]();i=null,d=0}if(g<d)i.length=g;else{if(!i)i=f;else for(;c<d;)i[c]=f[c++];for(;c<g;c++){i[c]=f[c];let h=c,C=O({[o]:i[k]?.[h]?.peek?i[k]?.[h]:i[h],[n]:a?a[h]:h},t),S=e.content?A(e):e.cloneNode(!0);s.before(S.content||S),y(S,C);let F=((N=i[$=k]||(i[$]=[]))[c]||(N[c]={}))[Symbol.dispose];i[k][c][Symbol.dispose]=()=>{F?.(),S[Symbol.dispose]?.(),S.remove()}}}d=g});return e.replaceWith(s),e[u]=null,c=>(a=null,typeof c=="number"?l=Array.from({length:c},(f,g)=>g+1):c?.constructor===Object?(a=Object.keys(c),l=Object.values(c)):l=c||[],K(()=>{l[x]?.value,m()}))};we.clean=e=>e.split(/\bin\b/)[1].trim();var Ne=we;var Te=(e,t,r,o)=>n=>b(e,o,p(n,e.getAttribute(o)));var je=e=>t=>{for(let r in t)b(e,le(r),t[r])};var qe={"*":Te,"":je,class:be,text:ge,style:xe,fx:Se,value:Ae,ref:ke,scope:Oe,if:ye,else:he,each:Ne},$e={debounce:(e,t=250,r=t==="tick"?queueMicrotask:t==="raf"?requestAnimationFrame:t==="idle"?requestIdleCallback:n=>setTimeout(n,t),o=0)=>(n,s=++o)=>r(()=>s==o&&e(n)),throttle:(e,t=250,r=t==="tick"?queueMicrotask:t==="raf"?requestAnimationFrame:o=>setTimeout(o,t))=>j(e,r),once:(e,t,r)=>Object.assign(o=>!t&&(t=1,e(o)),{once:!0}),prevent:e=>t=>(t?.preventDefault(),e(t)),stop:e=>t=>(t?.stopPropagation(),e(t)),immediate:e=>t=>(t?.stopImmediatePropagation(),e(t)),passive:e=>(e.passive=!0,e),capture:e=>(e.capture=!0,e),window:e=>(e.target=window,e),document:e=>(e.target=document,e),parent:e=>(e.target=e.target.parentNode,e),self:e=>t=>t.target===e.target&&e(t),outside:e=>(t,r)=>(r=e.target,!r.contains(t.target)&&t.target.isConnected&&(r.offsetWidth||r.offsetHeight))},ee={ctrl:e=>e.ctrlKey||e.key==="Control"||e.key==="Ctrl",shift:e=>e.shiftKey||e.key==="Shift",alt:e=>e.altKey||e.key==="Alt",meta:e=>e.metaKey||e.key==="Meta"||e.key==="Command",arrow:e=>e.key.startsWith("Arrow"),enter:e=>e.key==="Enter",esc:e=>e.key.startsWith("Esc"),tab:e=>e.key==="Tab",space:e=>e.key==="\xA0"||e.key==="Space"||e.key===" ",delete:e=>e.key==="Delete"||e.key==="Backspace",digit:e=>/^\d$/.test(e.key),letter:e=>/^\p{L}$/gu.test(e.key),char:e=>/^\S$/.test(e.key)};for(let e in ee)$e[e]=(t,...r)=>o=>ee[e](o)&&r.every(n=>ee[n]?.(o)??o.key===n)&&t(o);ie({directive:qe,modifier:$e,compile:e=>y.constructor(`with (arguments[0]) { return ${e} };`),signal:Y,effect:_,computed:pe,batch:de,untracked:me});var Rt=y;export{de as batch,pe as computed,Rt as default,_ as effect,Y as signal,y as sprae,We as start,Z as store,me as untracked,ie as use};
